import{a as K}from"./chunk-SN5MITE4.js";import{a as R}from"./chunk-OGQQ44XV.js";import{a as D}from"./chunk-22XSY4EJ.js";import{a as Q}from"./chunk-UQYYX3ZV.js";import{a as J}from"./chunk-ZOJYGP6Z.js";import{a as H,b as $,c as q}from"./chunk-U34JSWL2.js";import"./chunk-BPTFILPP.js";import{b as O}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{c as A,d as G,e as M,g as F,q as z,t as B,v as N}from"./chunk-BJBUZF5B.js";import{$a as s,Bb as T,Db as E,Eb as V,Gb as j,Ib as L,Jb as P,Ra as o,Sa as w,ba as I,cb as _,ea as U,ga as f,gb as i,ha as g,hb as n,ia as p,ib as c,ja as S,lb as C,pb as v,qb as u,tb as k,ub as m,wb as b}from"./chunk-GQGQXF3A.js";var W=(()=>{let r=class r{transform(l,a,d){let x,h;return d==="true"?x=!0:d==="false"?x=!1:x=null,x!==null?h=l.filter(y=>y.activo==x):x===null&&(h=l),a=a.toLocaleLowerCase(),a.length!==0?h.filter(y=>y.apellido.toLocaleLowerCase().includes(a)||y.nombre.toLocaleLowerCase().includes(a)||y.usuario.toLocaleLowerCase().includes(a)):h}};r.\u0275fac=function(a){return new(a||r)},r.\u0275pipe=U({name:"filtroUsuarios",type:r,pure:!0,standalone:!0});let e=r;return e})();function Y(e,r){e&1&&(i(0,"button",43),p(),i(1,"svg",44),c(2,"path",45),n()())}function Z(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function ee(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function te(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function ie(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function ne(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function re(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function ae(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function oe(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function se(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function le(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function pe(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function ce(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function me(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function de(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function ue(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function _e(e,r){e&1&&(p(),i(0,"svg",46),c(1,"polyline",47),n())}function fe(e,r){e&1&&(p(),i(0,"svg",48),c(1,"polyline",49),n())}function ge(e,r){e&1&&(p(),i(0,"svg",50),c(1,"line",51),n())}function ve(e,r){if(e&1){let t=C();i(0,"th",52)(1,"div",34),v("click",function(){f(t);let a=u(2);return g(a.ordenarPorColumna("activo"))}),i(2,"span"),m(3," Estado "),n(),i(4,"span",3),_(5,_e,2,0,"svg",36)(6,fe,2,0,"svg",37)(7,ge,2,0,"svg",38),n()()()}if(e&2){let t=u(2);o(5),s("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="activo")}}function xe(e,r){e&1&&(i(0,"th",52),m(1," Acci\xF3n "),n())}function he(e,r){e&1&&(i(0,"div",61),m(1," E "),n())}function be(e,r){e&1&&(i(0,"div",62),m(1," A "),n())}function ye(e,r){if(e&1){let t=C();i(0,"td",54)(1,"app-pastilla-estado",63),v("click",function(){f(t);let a=u().$implicit,d=u(2);return g(d.actualizarEstado(a))}),n()()}if(e&2){let t=u().$implicit;o(),s("activo",t.activo)}}var Se=e=>["/dashboard/usuarios/permisos",e];function we(e,r){if(e&1&&(p(),S(),i(0,"button",71),p(),i(1,"svg",44),c(2,"path",72),n()()),e&2){let t=u(2).$implicit;s("routerLink",E(1,Se,t.id))}}var Ce=e=>["/dashboard/usuarios/editar",e],Ee=e=>["/dashboard/usuarios/password",e];function ke(e,r){if(e&1&&(i(0,"td",64)(1,"p",65)(2,"button",66),p(),i(3,"svg",44),c(4,"path",67),n()(),S(),i(5,"button",68),p(),i(6,"svg",44),c(7,"path",69),n()(),_(8,we,3,3,"button",70),n()()),e&2){let t=u().$implicit;o(2),s("routerLink",E(3,Ce,t.id)),o(3),s("routerLink",E(5,Ee,t.id)),o(3),s("ngIf",t.role!=="ADMIN_ROLE")}}var je=e=>({"bg-indigo-50":e});function Ie(e,r){if(e&1&&(i(0,"tr",53)(1,"td",54)(2,"div",55),_(3,he,2,0,"div",56)(4,be,2,0,"div",57),n()(),i(5,"td",54)(6,"p",58),m(7),n()(),i(8,"td",54)(9,"p",58),m(10),n()(),i(11,"td",54)(12,"p",55),m(13),n()(),i(14,"td",54)(15,"p",55),m(16),n()(),_(17,ye,2,1,"td",59)(18,ke,9,7,"td",60),n()),e&2){let t=r.$implicit,l=u(2);s("ngClass",E(9,je,l.authService.usuario.userId===t.id)),o(3),s("ngIf",t.role=="USER_ROLE"),o(),s("ngIf",t.role=="ADMIN_ROLE"),o(3),b(" ",t.apellido.toLowerCase()," "),o(3),b(" ",t.nombre.toLowerCase()," "),o(3),b(" ",t.dni," "),o(3),b(" ",t.usuario," "),o(),s("appPermisos",l.permiso_escritura),o(),s("appPermisos",l.permiso_escritura)}}function Ue(e,r){if(e&1){let t=C();i(0,"div",73)(1,"pagination-controls",74),v("pageChange",function(a){f(t);let d=u(2);return g(d.paginaActual=a)}),n()()}}var Te=(e,r)=>({itemsPerPage:e,currentPage:r});function Ve(e,r){if(e&1){let t=C();i(0,"app-tarjeta-lista")(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),m(5," Listado de usuarios "),n(),i(6,"p"),m(7),n()(),i(8,"div"),_(9,Y,3,0,"button",5),n()(),i(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"select",11,12),v("change",function(){f(t);let a=k(16),d=u();return g(d.filtrarActivos(a.value))}),i(17,"option",13),m(18," Activos "),n(),i(19,"option",14),m(20," Inactivos "),n(),i(21,"option",15),m(22," Todos "),n()(),i(23,"div",16),p(),i(24,"svg",17),c(25,"path",18),n()()()(),S(),i(26,"div",19)(27,"span",20),p(),i(28,"svg",21),c(29,"path",22),n()(),S(),i(30,"input",23,24),v("keyup",function(){f(t);let a=k(31),d=u();return g(d.filtrarParametro(a.value))}),n()(),i(32,"select",25)(33,"option",26),m(34," 10 elementos "),n(),i(35,"option",27),m(36," 20 elementos "),n(),i(37,"option",28),m(38," 50 elementos "),n(),i(39,"option",29),m(40," 100 elementos "),n()()()(),i(41,"div",30)(42,"div",31)(43,"table",32)(44,"thead")(45,"tr")(46,"th",33)(47,"div",34),v("click",function(){f(t);let a=u();return g(a.ordenarPorColumna("role"))}),i(48,"span"),m(49," Tipo "),n(),i(50,"span",35),_(51,Z,2,0,"svg",36)(52,ee,2,0,"svg",37)(53,te,2,0,"svg",38),n()()(),i(54,"th",33)(55,"div",34),v("click",function(){f(t);let a=u();return g(a.ordenarPorColumna("apellido"))}),i(56,"span"),m(57," Apellido "),n(),i(58,"span",35),_(59,ie,2,0,"svg",36)(60,ne,2,0,"svg",37)(61,re,2,0,"svg",38),n()()(),i(62,"th",33)(63,"div",34),v("click",function(){f(t);let a=u();return g(a.ordenarPorColumna("nombre"))}),i(64,"span"),m(65," Nombre "),n(),i(66,"span",3),_(67,ae,2,0,"svg",36)(68,oe,2,0,"svg",37)(69,se,2,0,"svg",38),n()()(),i(70,"th",39)(71,"div",34),v("click",function(){f(t);let a=u();return g(a.ordenarPorColumna("dni"))}),i(72,"span"),m(73," DNI "),n(),i(74,"span",3),_(75,le,2,0,"svg",36)(76,pe,2,0,"svg",37)(77,ce,2,0,"svg",38),n()()(),i(78,"th",33)(79,"div",34),v("click",function(){f(t);let a=u();return g(a.ordenarPorColumna("usuario"))}),i(80,"span"),m(81," Usuario "),n(),i(82,"span",3),_(83,me,2,0,"svg",36)(84,de,2,0,"svg",37)(85,ue,2,0,"svg",38),n()()(),_(86,ve,8,3,"th",40)(87,xe,2,0,"th",40),n()(),i(88,"tbody"),_(89,Ie,19,11,"tr",41),j(90,"paginate"),j(91,"filtroUsuarios"),n()()()()(),_(92,Ue,2,0,"div",42),n()()}if(e&2){let t=u();o(7),b(" Total de usuarios: ",t.usuarios.length," "),o(2),s("appPermisos",t.permiso_escritura),o(42),s("ngIf",t.ordenar.columna=="role"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="role"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="role"),o(6),s("ngIf",t.ordenar.columna=="apellido"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="apellido"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="apellido"),o(6),s("ngIf",t.ordenar.columna=="nombre"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="nombre"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="nombre"),o(6),s("ngIf",t.ordenar.columna=="dni"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="dni"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="dni"),o(6),s("ngIf",t.ordenar.columna=="usuario"&&t.ordenar.direccion==1),o(),s("ngIf",t.ordenar.columna=="usuario"&&t.ordenar.direccion==-1),o(),s("ngIf",t.ordenar.columna!="usuario"),o(),s("appPermisos",t.permiso_escritura),o(),s("appPermisos",t.permiso_escritura),o(2),s("ngForOf",L(90,21,P(91,24,t.usuarios,t.filtro.parametro,t.filtro.activo),V(28,Te,t.cantidadItems,t.paginaActual))),o(3),s("ngIf",t.usuarios.length>t.cantidadItems)}}var Ze=(()=>{let r=class r{constructor(l,a,d,x){this.usuariosService=l,this.alertService=a,this.dataService=d,this.authService=x,this.permiso_escritura=["USUARIOS_ALL"],this.total=0,this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:1,columna:"apellido"}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Usuarios",this.alertService.loading(),this.listarUsuarios()}listarUsuarios(){this.usuariosService.listarUsuarios(this.ordenar.direccion,this.ordenar.columna).subscribe({next:l=>{let{usuarios:a,total:d}=l;this.usuarios=a,this.total=d,this.alertService.close()},error:({error:l})=>this.alertService.errorApi(l.message)})}actualizarEstado(l){let{id:a,activo:d}=l;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:x})=>{x&&(this.alertService.loading(),this.usuariosService.actualizarUsuario(a,{activo:!d}).subscribe(()=>{this.alertService.loading(),this.listarUsuarios()},({error:h})=>{this.alertService.close(),this.alertService.errorApi(h.message)}))})}filtrarActivos(l){this.paginaActual=1,this.filtro.activo=l}filtrarParametro(l){this.paginaActual=1,this.filtro.parametro=l}ordenarPorColumna(l){this.ordenar.columna=l,this.ordenar.direccion=this.ordenar.direccion==1?-1:1,this.alertService.loading(),this.listarUsuarios()}};r.\u0275fac=function(a){return new(a||r)(w(K),w(N),w(O),w(D))},r.\u0275cmp=I({type:r,selectors:[["app-usuarios"]],standalone:!0,features:[T],decls:1,vars:1,consts:[[4,"ngIf"],[1,"max-w-full","mx-auto"],[1,"flex","items-center","w-full","justify-between","bg-gray-800","text-white","px-4","py-3","rounded-t"],[1,"ml-2"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nuevo usuario","routerLink","/dashboard/usuarios/nuevo","class","boton-nuevo-header mr-1",4,"appPermisos"],[1,"py-4","px-4","text-sm"],[1,"md:flex","md:items-center","md:justify-between"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative","w-full","md:w-auto"],[1,"h-full","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative","mt-1","md:mt-0"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondaryColor"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"md:ml-2","mt-2","md:mt-0","w-full","md:w-max","outline-none","p-2","md:p-1","bg-white","border","border-gray-400","rounded"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"-mx-4","sm:-mx-8","px-4","sm:px-8","py-4","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","border","border-gray-200","min-w-full","shadow","rounded-lg"],[1,"min-w-full","leading-normal"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-600","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-left","text-xs","font-semibold","text-gray-600","uppercase","tracking-wider"],["class","px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-600 tracking-wider",4,"appPermisos"],["class","animate__animated animate__fadeIn",3,"ngClass",4,"ngFor","ngForOf"],["class","px-5 py-5 bg-white border-t text-sm flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],["title","Nuevo usuario","routerLink","/dashboard/usuarios/nuevo",1,"boton-nuevo-header","mr-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"px-5","py-3","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-600","tracking-wider"],[1,"animate__animated","animate__fadeIn",3,"ngClass"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","whitespace-no-wrap"],["class","bg-orange-100 flex items-center font-semibold text-orange-500 text-2xl justify-center w-10 h-10 rounded-full shadow border border-orange-300","src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",4,"ngIf"],["class","bg-blue-100 flex items-center font-semibold text-blue-900 text-2xl justify-center w-10 h-10 rounded-full shadow border border-blue-300","src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",4,"ngIf"],[1,"text-gray-900","whitespace-no-wrap","capitalize"],["class","px-5 py-2 border-b border-gray-200 text-xs",4,"appPermisos"],["class","px-5 py-2 border-b border-gray-200 text-xs text-center",4,"appPermisos"],["src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",1,"bg-orange-100","flex","items-center","font-semibold","text-orange-500","text-2xl","justify-center","w-10","h-10","rounded-full","shadow","border","border-orange-300"],["src","assets/img/usuarios/usuario_estandar.png","alt","Avatar",1,"bg-blue-100","flex","items-center","font-semibold","text-blue-900","text-2xl","justify-center","w-10","h-10","rounded-full","shadow","border","border-blue-300"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar usuario",1,"boton-editar","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],["title","Actualizar contrase\xF1a",1,"p-2","rounded","shadow","focus:outline-none","bg-fuchsia-600","hover:opacity-90","text-white","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"],["title","Permisos de usuario","class","p-2 rounded shadow bg-blue-600 hover:opacity-90 text-white ml-2",3,"routerLink",4,"ngIf"],["title","Permisos de usuario",1,"p-2","rounded","shadow","bg-blue-600","hover:opacity-90","text-white","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"],[1,"px-5","py-5","bg-white","border-t","text-sm","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(a,d){a&1&&_(0,Ve,93,31,"app-tarjeta-lista",0),a&2&&s("ngIf",d.usuarios)},dependencies:[F,A,G,M,J,B,z,Q,W,q,H,$,R],encapsulation:2});let e=r;return e})();export{Ze as default};
