import{a as ee,b as te}from"./chunk-CAYDV5JR.js";import{a as J}from"./chunk-OGQQ44XV.js";import"./chunk-22XSY4EJ.js";import"./chunk-55FSNNZ2.js";import{d as K}from"./chunk-6M6LJACB.js";import{a as Y}from"./chunk-UQYYX3ZV.js";import{a as Z}from"./chunk-ZOJYGP6Z.js";import{a as U,b as W,c as X}from"./chunk-U34JSWL2.js";import{c as N,e as D,j as $,k as O,l as H,o as R}from"./chunk-B2HCO65P.js";import"./chunk-BPTFILPP.js";import{b as Q}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{e as F,g as B,t as z,v as q}from"./chunk-BJBUZF5B.js";import{$a as c,Bb as A,Eb as G,Gb as w,Hb as M,Ib as j,Jb as L,Ra as o,Sa as b,ba as T,cb as v,ea as I,eb as V,fb as P,ga as x,gb as e,ha as C,hb as i,ia as d,ib as m,ja as E,lb as S,pb as u,qb as g,tb as k,ub as p,wb as y}from"./chunk-GQGQXF3A.js";var ie=(()=>{let r=class r{transform(l,a,n){let h,_;return n==="true"?h=!0:n==="false"?h=!1:h=null,h!==null?_=l.filter(f=>f.activo==h):h===null&&(_=l),a=a.toLocaleLowerCase(),a.length!==0?_.filter(f=>f.descripcion.toLocaleLowerCase().includes(a)||f.identificacion.toLocaleLowerCase().includes(a)):_}};r.\u0275fac=function(a){return new(a||r)},r.\u0275pipe=I({name:"filtroClientes",type:r,pure:!0,standalone:!0});let t=r;return t})();function re(t,r){if(t&1){let s=S();e(0,"button",46),u("click",function(){x(s);let a=g();return C(a.clientesService.abrirAbm("crear"))}),d(),e(1,"svg",47),m(2,"path",48),i()()}}function oe(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function ae(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function le(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function se(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function ce(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function me(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function de(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function pe(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function _e(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function ue(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function fe(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function ve(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function ge(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function he(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function xe(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function Ce(t,r){t&1&&(d(),e(0,"svg",49),m(1,"polyline",50),i())}function Se(t,r){t&1&&(d(),e(0,"svg",51),m(1,"polyline",52),i())}function ye(t,r){t&1&&(d(),e(0,"svg",53),m(1,"line",54),i())}function be(t,r){if(t&1){let s=S();e(0,"th",55)(1,"div",35),u("click",function(){x(s);let a=g();return C(a.ordenarPorColumna("activo"))}),e(2,"span"),p(3," Estado "),i(),e(4,"span",42),v(5,Ce,2,0,"svg",37)(6,Se,2,0,"svg",38)(7,ye,2,0,"svg",39),i()()()}if(t&2){let s=g();o(5),c("ngIf",s.ordenar.columna=="activo"&&s.ordenar.direccion=="asc"),o(),c("ngIf",s.ordenar.columna=="activo"&&s.ordenar.direccion=="desc"),o(),c("ngIf",s.ordenar.columna!="activo")}}function we(t,r){t&1&&(e(0,"th",55),p(1," Acci\xF3n "),i())}var Ee=(t,r)=>r.id;function ke(t,r){if(t&1){let s=S();e(0,"td",57)(1,"app-pastilla-estado",63),u("click",function(){x(s);let a=g().$implicit,n=g(2);return C(n.actualizarEstado(a))}),i()()}if(t&2){let s=g().$implicit;o(),c("activo",s.activo)}}function Te(t,r){if(t&1){let s=S();e(0,"td",64)(1,"span",65)(2,"button",66),u("click",function(){x(s);let a=g().$implicit,n=g(2);return C(n.clientesService.abrirAbm("editar",a))}),d(),e(3,"svg",47),m(4,"path",67),i()()()()}}function Ie(t,r){if(t&1&&(e(0,"tr",56)(1,"td",57),m(2,"img",58),i(),e(3,"td",57)(4,"p",59),p(5),i()(),e(6,"td",57)(7,"p",59),p(8),i()(),e(9,"td",57)(10,"p",59),p(11),i()(),e(12,"td",57)(13,"p",60),p(14),w(15,"fecha"),i()(),v(16,ke,2,1,"td",61)(17,Te,5,0,"td",62),i()),t&2){let s=r.$implicit,l=g(2);o(5),y(" ",s.descripcion," "),o(3),y(" ",s.tipo_identificacion," "),o(3),y(" ",s.identificacion," "),o(3),y(" ",M(15,6,s.createdAt)," "),o(2),c("appPermisos",l.permiso_escritura),o(),c("appPermisos",l.permiso_escritura)}}function Ve(t,r){t&1&&(e(0,"tr",68),p(1," a "),i(),e(2,"tr",69)(3,"td",70),p(4," No se encontraron clientes "),i()())}var Pe=(t,r)=>({itemsPerPage:t,currentPage:r});function Ae(t,r){if(t&1&&(e(0,"tbody"),V(1,Ie,18,8,"tr",71,Ee,!1,Ve,5,0),w(4,"paginate"),w(5,"filtroClientes"),i()),t&2){let s=g();o(),P(j(4,1,L(5,4,s.clientesService.clientes,s.filtro.parametro,s.filtro.activo),G(8,Pe,s.cantidadItems,s.paginaActual)))}}function Ge(t,r){if(t&1){let s=S();e(0,"div",72)(1,"pagination-controls",73),u("pageChange",function(a){x(s);let n=g();return C(n.paginaActual=a)}),i()()}}var Ye=(()=>{let r=class r{constructor(l,a,n){this.clientesService=l,this.alertService=a,this.dataService=n,this.permiso_escritura=["CLIENTES_ALL"],this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:"desc",columna:"descripcion"}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Clientes",this.alertService.loading(),this.listarClientes()}listarClientes(){let l={direccion:this.ordenar.direccion,columna:this.ordenar.columna};this.clientesService.listarClientes(l).subscribe({next:({clientes:a})=>{this.clientesService.clientes=a,this.alertService.close()},error:({error:a})=>this.alertService.errorApi(a.message)})}nuevoCliente(l){this.clientesService.clientes=[l,...this.clientesService.clientes],this.alertService.close()}actualizarCliente(l){let a=this.clientesService.clientes.findIndex(n=>n.id===l.id);this.clientesService.clientes[a]=l,this.clientesService.clientes=[...this.clientesService.clientes],this.alertService.close()}actualizarEstado(l){let{id:a,activo:n}=l;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:h})=>{h&&(this.alertService.loading(),this.clientesService.actualizarCliente(a,{activo:!n}).subscribe({next:()=>{this.alertService.loading(),this.listarClientes()},error:({error:_})=>this.alertService.errorApi(_.message)}))})}filtrarActivos(l){this.paginaActual=1,this.filtro.activo=l}filtrarParametro(l){this.paginaActual=1,this.filtro.parametro=l}ordenarPorColumna(l){this.ordenar.columna=l,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarClientes()}};r.\u0275fac=function(a){return new(a||r)(b(ee),b(q),b(Q))},r.\u0275cmp=T({type:r,selectors:[["app-clientes"]],standalone:!0,features:[A],decls:92,vars:22,consts:[[3,"insertEvent","updateEvent"],[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nuevo cliente","class","boton-nuevo-header",3,"click",4,"appPermisos"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],["class","px-5 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-900 tracking-wider",4,"appPermisos"],[4,"ngIf"],["class","px-5 text-sm py-5 mt-4 bg-white border-t flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],["title","Nuevo cliente",1,"boton-nuevo-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"animate__animated","animate__fadeIn"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],["src","assets/svg/cliente.svg","alt","cliente.svg",1,"w-14"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"text-gray-900","whitespace-no-wrap"],["class","px-5 py-2 border-b border-gray-200 text-xs",4,"appPermisos"],["class","px-5 py-2 border-b border-gray-200 text-xs text-center",4,"appPermisos"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar cliente",1,"boton-editar","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],[1,"p-4","text-white"],[1,"w-full"],["colspan","7",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated animate__fadeIn"],[1,"px-5","text-sm","py-5","mt-4","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(a,n){if(a&1){let h=S();e(0,"app-abm-cliente",0),u("insertEvent",function(f){return n.nuevoCliente(f)})("updateEvent",function(f){return n.actualizarCliente(f)}),i(),e(1,"div",1)(2,"app-tarjeta-lista")(3,"div",2)(4,"div")(5,"div",3)(6,"div",4)(7,"h2",5),p(8," Clientes "),i(),e(9,"p"),p(10),i()(),e(11,"div"),v(12,re,3,0,"button",6),i()(),e(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"select",11,12),u("change",function(){x(h);let f=k(18);return C(n.filtrarActivos(f.value))}),e(19,"option",13),p(20," Activos "),i(),e(21,"option",14),p(22," Inactivos "),i(),e(23,"option",15),p(24," Todos "),i()(),e(25,"div",16),d(),e(26,"svg",17),m(27,"path",18),i()()()(),E(),e(28,"div",19)(29,"span",20),d(),e(30,"svg",21),m(31,"path",22),i()(),E(),e(32,"input",23,24),u("keyup",function(){x(h);let f=k(33);return C(n.filtrarParametro(f.value))}),i()(),e(34,"select",25),u("change",function(){return n.paginaActual=1})("ngModelChange",function(f){return n.cantidadItems=f}),e(35,"option",26),p(36," 10 elementos "),i(),e(37,"option",27),p(38," 20 elementos "),i(),e(39,"option",28),p(40," 50 elementos "),i(),e(41,"option",29),p(42," 100 elementos "),i()()()(),e(43,"div",30)(44,"div",31)(45,"table",32)(46,"thead")(47,"tr",33)(48,"th",34)(49,"div",35),u("click",function(){return n.ordenarPorColumna("id")}),e(50,"span"),p(51," Icono "),i(),e(52,"span",36),v(53,oe,2,0,"svg",37)(54,ae,2,0,"svg",38)(55,le,2,0,"svg",39),i()()(),e(56,"th",34)(57,"div",35),u("click",function(){return n.ordenarPorColumna("descripcion")}),e(58,"span"),p(59," Nombre o Razon Social "),i(),e(60,"span",36),v(61,se,2,0,"svg",37)(62,ce,2,0,"svg",38)(63,me,2,0,"svg",39),i()()(),e(64,"th",34)(65,"div",35),u("click",function(){return n.ordenarPorColumna("tipo_identificacion")}),e(66,"span"),p(67," Tipo de identificacion "),i(),e(68,"span",36),v(69,de,2,0,"svg",37)(70,pe,2,0,"svg",38)(71,_e,2,0,"svg",39),i()()(),e(72,"th",34)(73,"div",35),u("click",function(){return n.ordenarPorColumna("identificacion")}),e(74,"span"),p(75," Identificacion "),i(),e(76,"span",36),v(77,ue,2,0,"svg",37)(78,fe,2,0,"svg",38)(79,ve,2,0,"svg",39),i()()(),e(80,"th",40)(81,"div",41),u("click",function(){return n.ordenarPorColumna("createdAt")}),e(82,"span"),p(83," Fecha de creaci\xF3n "),i(),e(84,"span",42),v(85,ge,2,0,"svg",37)(86,he,2,0,"svg",38)(87,xe,2,0,"svg",39),i()()(),v(88,be,8,3,"th",43)(89,we,2,0,"th",43),i()(),v(90,Ae,6,11,"tbody",44),i()()()(),v(91,Ge,2,0,"div",45),i()()()}a&2&&(o(10),y(" Total de clientes: ",n.clientesService.clientes.length," "),o(2),c("appPermisos",n.permiso_escritura),o(22),c("ngModel",n.cantidadItems),o(19),c("ngIf",n.ordenar.columna=="id"&&n.ordenar.direccion=="asc"),o(),c("ngIf",n.ordenar.columna=="id"&&n.ordenar.direccion=="desc"),o(),c("ngIf",n.ordenar.columna!="id"),o(6),c("ngIf",n.ordenar.columna=="descripcion"&&n.ordenar.direccion=="asc"),o(),c("ngIf",n.ordenar.columna=="descripcion"&&n.ordenar.direccion=="desc"),o(),c("ngIf",n.ordenar.columna!="descripcion"),o(6),c("ngIf",n.ordenar.columna=="tipo_identificacion"&&n.ordenar.direccion=="asc"),o(),c("ngIf",n.ordenar.columna=="tipo_identificacion"&&n.ordenar.direccion=="desc"),o(),c("ngIf",n.ordenar.columna!="tipo_identificacion"),o(6),c("ngIf",n.ordenar.columna=="identificacion"&&n.ordenar.direccion=="asc"),o(),c("ngIf",n.ordenar.columna=="identificacion"&&n.ordenar.direccion=="desc"),o(),c("ngIf",n.ordenar.columna!="identificacion"),o(6),c("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="asc"),o(),c("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="desc"),o(),c("ngIf",n.ordenar.columna!="createdAt"),o(),c("appPermisos",n.permiso_escritura),o(),c("appPermisos",n.permiso_escritura),o(),c("ngIf",n.clientesService.clientes),o(),c("ngIf",n.clientesService.clientes.length>n.cantidadItems))},dependencies:[B,F,R,O,H,$,N,D,K,X,U,W,z,Y,Z,ie,te,J],encapsulation:2});let t=r;return t})();export{Ye as default};
