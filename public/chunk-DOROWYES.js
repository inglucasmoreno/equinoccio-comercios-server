import{a as _e}from"./chunk-KINNSLPC.js";import{a as ve,b as O}from"./chunk-L5BLIFW3.js";import{a as re}from"./chunk-OGQQ44XV.js";import{a as te}from"./chunk-22XSY4EJ.js";import{a as ue}from"./chunk-AZJWBWL5.js";import{a as ce}from"./chunk-55FSNNZ2.js";import{d as ae}from"./chunk-6M6LJACB.js";import{a as me}from"./chunk-UQYYX3ZV.js";import{a as pe}from"./chunk-ZOJYGP6Z.js";import{a as le,b as de,c as se}from"./chunk-U34JSWL2.js";import{a as ie,c as V,e as z,g as ne,j as G,k as j,l as N,m as oe,o as D}from"./chunk-B2HCO65P.js";import"./chunk-BPTFILPP.js";import{b as L}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{c as Y,d as ee,e as F,g as A,t as I,v as B}from"./chunk-BJBUZF5B.js";import{$a as l,Bb as M,Db as K,Eb as E,Gb as w,Hb as T,Ib as W,Jb as X,Ra as o,Sa as C,Va as $,a as U,b as Z,ba as P,cb as g,db as R,eb as q,fb as Q,ga as S,gb as e,ha as b,hb as i,ia as v,ib as p,ja as k,lb as x,pb as _,qb as f,tb as H,ub as a,wb as h,xb as J}from"./chunk-GQGQXF3A.js";function ye(n,r){if(n&1&&(e(0,"option",40),a(1),i()),n&2){let d=r.$implicit;l("value",d.id),o(),h(" ",d.descripcion," ")}}function we(n,r){if(n&1){let d=x();e(0,"button",41),_("click",function(){S(d);let s=f();return b(s.generarCodigo())}),v(),e(1,"svg",42),p(2,"path",43)(3,"path",44),i()()}}function ke(n,r){n&1&&(e(0,"span",10),a(1," * "),i())}function Ee(n,r){if(n&1&&(e(0,"div",45)(1,"div",46)(2,"p",47),a(3," Fecha de alta "),i(),e(4,"div",48),a(5),w(6,"fecha"),i()(),e(7,"div",49)(8,"p",47),a(9," Usuario creador "),i(),e(10,"div",50),a(11),i()()()),n&2){let d=f();o(5),h(" ",T(6,3,d.productosService.productoSeleccionado.createdAt)," "),o(6),J(" ",d.productosService.productoSeleccionado.creatorUser.apellido.toLowerCase()," ",d.productosService.productoSeleccionado.creatorUser.nombre.toLowerCase()," ")}}function Pe(n,r){if(n&1){let d=x();e(0,"button",51),_("click",function(){S(d);let s=f();return b(s.nuevoProducto())}),a(1," Crear producto "),i()}}function Me(n,r){if(n&1){let d=x();e(0,"button",52),_("click",function(){S(d);let s=f();return b(s.actualizarProducto())}),a(1," Actualizar producto "),i()}}var ge=(()=>{let r=class r{constructor(c,s,t,u,m){this.authService=c,this.unidadesMedidaService=s,this.dataService=t,this.alertService=u,this.productosService=m,this.insertEvent=new $,this.updateEvent=new $,this.unidadesMedida=[]}ngOnInit(){this.alertService.loading(),this.inicializacion()}inicializacion(){this.unidadesMedidaService.listarUnidades({activo:"true"}).subscribe({next:({unidades:c})=>{this.unidadesMedida=c,this.alertService.close()},error:({error:c})=>this.alertService.errorApi(c.message)})}nuevoProducto(){if(this.verificacionDatos()!=="")return this.alertService.info(this.verificacionDatos());this.alertService.loading();let c=Z(U({},this.productosService.abmForm),{alertaStock:this.productosService.abmForm.alertaStock=="true",balanza:this.productosService.abmForm.balanza=="true",alicuota:Number(this.productosService.abmForm.alicuota),unidadMedidaId:Number(this.productosService.abmForm.unidadMedidaId),creatorUserId:this.authService.usuario.userId});this.productosService.nuevoProducto(c).subscribe({next:({producto:s})=>{this.insertEvent.emit(s),this.productosService.showModalAbm=!1},error:({error:s})=>this.alertService.errorApi(s.message)})}actualizarProducto(){if(this.verificacionDatos()!=="")return this.alertService.info(this.verificacionDatos());this.alertService.loading();let c=Z(U({},this.productosService.abmForm),{alertaStock:this.productosService.abmForm.alertaStock=="true",balanza:this.productosService.abmForm.balanza=="true",alicuota:Number(this.productosService.abmForm.alicuota),unidadMedidaId:Number(this.productosService.abmForm.unidadMedidaId),cantidadMinima:this.productosService.abmForm.alertaStock==="true"?Number(this.productosService.abmForm.cantidadMinima):null,creatorUserId:this.authService.usuario.userId});this.productosService.actualizarProducto(this.productosService.productoSeleccionado.id,c).subscribe({next:({producto:s})=>{this.updateEvent.emit(s),this.productosService.showModalAbm=!1},error:({error:s})=>this.alertService.errorApi(s.message)})}adaptandoUnidadMedida(){this.productosService.abmForm.balanza==="true"?(this.productosService.abmForm.unidadMedidaId="2",this.productosService.abmForm.codigo=""):this.productosService.abmForm.unidadMedidaId="1"}adaptandoCodigo(){if(this.productosService.abmForm.balanza==="true"){if(this.productosService.abmForm.codigo.length!==this.dataService.mascaraProducto.length){this.alertService.info(`El c\xF3digo debe tener ${this.dataService.mascaraProducto.length} digitos`);return}let c=this.productosService.abmForm.codigo,s=this.dataService.mascaraProducto,t="";for(let u=0;u<s.length;u++)s[u]==="y"?t+=c[u]:t+="";this.productosService.abmForm.codigo=t}}generarCodigo(){this.productosService.estadoAbm==="editar"?this.productosService.abmForm.codigo=this.productosService.productoSeleccionado.id.toString().padStart(13,"0"):(this.alertService.loading(),this.productosService.generarCodigo().subscribe({next:({codigo:c})=>{this.productosService.abmForm.codigo=c,this.alertService.close()},error:({error:c})=>this.alertService.errorApi(c.message)}))}calcularPrecioVenta(){if(this.productosService.abmForm.precioCompra==null||this.productosService.abmForm.porcentajeGanancia==null)return;let c=Number(this.productosService.abmForm.precioCompra),s=Number(this.productosService.abmForm.porcentajeGanancia),t=c+c*(s/100);this.productosService.abmForm.precioVenta=Number(t.toFixed(2))}cambioAlerta(){this.productosService.abmForm.alertaStock==="false"&&(this.productosService.abmForm.cantidadMinima=null)}verificacionDatos(){let c="",{descripcion:s,unidadMedidaId:t,precioVenta:u,cantidad:m}=this.productosService.abmForm;return s.trim()===""?c="Debes colocar una descripci\xF3n":t===""?c="Debes seleccionar una unidad de medida":(!u||u<0)&&(c="Debes colocar un precio de venta"),c}submit(){this.productosService.estadoAbm==="crear"?this.nuevoProducto():this.actualizarProducto()}};r.\u0275fac=function(s){return new(s||r)(C(te),C(_e),C(L),C(B),C(O))},r.\u0275cmp=P({type:r,selectors:[["app-abm-producto"]],outputs:{insertEvent:"insertEvent",updateEvent:"updateEvent"},standalone:!0,features:[M],decls:98,vars:22,consts:[[3,"showModal"],[1,"flex","items-center","justify-between","bg-gray-800","rounded-t","p-2"],[1,"text-white","px-2","py-1","rounded-t","text-lg"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"cursor-pointer","feather","feather-x","text-white","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"px-4","pt-2","max-h-96","overflow-y-auto","text-sm"],[1,"flex","items-center"],[1,"w-1/2"],[1,"font-semibold"],[1,"text-red-500"],["placeholder","Ej. Coca cola","type","text",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],[1,"w-1/2","ml-2"],[1,"input-generico","w-full","mt-2",3,"ngModel","change","ngModelChange"],["value","false"],["value","true"],[1,"flex","items-center","mt-2"],[1,"input-generico","w-full","mt-2",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Ej. 110002220","type","text",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],["title","Generar c\xF3digo","class","ml-2 p-2 hover:text-secondaryColor border border-gray-400 mt-2 bg-gray-100 rounded",3,"click",4,"ngIf"],[1,"border","border-gray-400","mt-3"],[1,"bg-gray-50","p-2","text-sm","font-semibold","border-b","border-gray-400"],[1,"px-2","mt-2","flex","items-center"],["type","number","min","0","step","0.01","placeholder","Ej. 2500",1,"input-generico","w-full","mt-2",3,"ngModel","keyup","ngModelChange"],["type","number","min","0","step","0.01","placeholder","Ej. 5",1,"input-generico","w-full","mt-2",3,"disabled","ngModel","keyup","ngModelChange"],[1,"p-2","flex","items-center"],["type","number","min","0","step","0.01","placeholder","Ej. 3000",1,"input-generico","w-full","mt-2",3,"disabled","ngModel","ngModelChange"],["value","21"],["value","10.5"],[1,"w-1/3"],["type","number","min","0","step","0.01","placeholder","Ej. 2500",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],[1,"w-1/3","ml-2"],["class","text-red-500",4,"ngIf"],["type","number","min","0","step","0.01","placeholder","Ej. 10",1,"input-generico","w-full","mt-2",3,"ngModel","disabled","keyup.enter","ngModelChange"],["class","xl:flex items-center mt-4",4,"ngIf"],[1,"px-2","mt-1","pb-2"],["class","boton-crear w-full mt-4",3,"click",4,"ngIf"],["class","boton-editar w-full mt-4",3,"click",4,"ngIf"],[3,"value"],["title","Generar c\xF3digo",1,"ml-2","p-2","hover:text-secondaryColor","border","border-gray-400","mt-2","bg-gray-100","rounded",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"],["stroke-linecap","round","stroke-linejoin","round","d","M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"],[1,"xl:flex","items-center","mt-4"],[1,"xl:w-1/2"],[1,"font-semibold","text-sm"],[1,"border","text-sm","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"xl:ml-4","xl:w-1/2","mt-4","xl:mt-0"],[1,"border","text-sm","capitalize","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"boton-crear","w-full","mt-4",3,"click"],[1,"boton-editar","w-full","mt-4",3,"click"]],template:function(s,t){s&1&&(e(0,"app-modal",0)(1,"div")(2,"div",1)(3,"h1",2),a(4),i(),v(),e(5,"svg",3),_("click",function(){return t.productosService.showModalAbm=!1}),p(6,"line",4)(7,"line",5),i()(),k(),e(8,"div",6)(9,"div",7)(10,"div",8)(11,"p",9)(12,"span",10),a(13," * "),i(),a(14," Descripci\xF3n "),i(),e(15,"input",11),_("keyup.enter",function(){return t.submit()})("ngModelChange",function(m){return t.productosService.abmForm.descripcion=m}),i()(),e(16,"div",12)(17,"p",9)(18,"span",10),a(19," * "),i(),a(20," Balanza "),i(),e(21,"select",13),_("change",function(){return t.adaptandoUnidadMedida()})("ngModelChange",function(m){return t.productosService.abmForm.balanza=m}),e(22,"option",14),a(23," No "),i(),e(24,"option",15),a(25," Si "),i()()()(),e(26,"div",16)(27,"div",8)(28,"p",9)(29,"span",10),a(30," * "),i(),a(31," Unidad de medida "),i(),e(32,"select",17),_("ngModelChange",function(m){return t.productosService.abmForm.unidadMedidaId=m}),e(33,"option",18),a(34," Seleccionar unidad "),i(),g(35,ye,2,2,"option",19),i()(),e(36,"div",12)(37,"p",9),a(38," C\xF3digo "),i(),e(39,"div",7)(40,"input",20),_("keyup.enter",function(){return t.adaptandoCodigo()})("ngModelChange",function(m){return t.productosService.abmForm.codigo=m}),i(),g(41,we,4,0,"button",21),i()()(),e(42,"div",22)(43,"p",23),a(44," Datos de precio "),i(),e(45,"div",24)(46,"div",8)(47,"p",9),a(48," Precio compra "),i(),e(49,"input",25),_("keyup",function(){return t.calcularPrecioVenta()})("ngModelChange",function(m){return t.productosService.abmForm.precioCompra=m}),i()(),e(50,"div",12)(51,"p",9),a(52," % Ganancia "),i(),e(53,"input",26),_("keyup",function(){return t.calcularPrecioVenta()})("ngModelChange",function(m){return t.productosService.abmForm.porcentajeGanancia=m}),i()()(),e(54,"div",27)(55,"div",8)(56,"p",9)(57,"span",10),a(58," * "),i(),a(59," Precio venta "),i(),e(60,"input",28),_("ngModelChange",function(m){return t.productosService.abmForm.precioVenta=m}),i()(),e(61,"div",12)(62,"p",9)(63,"span",10),a(64," * "),i(),a(65," Alicuota "),i(),e(66,"select",17),_("ngModelChange",function(m){return t.productosService.abmForm.alicuota=m}),e(67,"option",29),a(68,"21"),i(),e(69,"option",30),a(70,"10.5"),i()()()()(),e(71,"div",22)(72,"p",23),a(73," Datos de stock "),i(),e(74,"div",27)(75,"div",31)(76,"p",9)(77,"span",10),a(78," * "),i(),a(79," Cantidad "),i(),e(80,"input",32),_("keyup.enter",function(){return t.submit()})("ngModelChange",function(m){return t.productosService.abmForm.cantidad=m}),i()(),e(81,"div",33)(82,"p",9),a(83," Alerta "),i(),e(84,"select",13),_("change",function(){return t.cambioAlerta()})("ngModelChange",function(m){return t.productosService.abmForm.alertaStock=m}),e(85,"option",14),a(86," Sin alerta "),i(),e(87,"option",15),a(88," Con alerta "),i()()(),e(89,"div",33)(90,"p",9),g(91,ke,2,0,"span",34),a(92," Cantidad minima "),i(),e(93,"input",35),_("keyup.enter",function(){return t.submit()})("ngModelChange",function(m){return t.productosService.abmForm.cantidadMinima=m}),i()()()(),g(94,Ee,12,5,"div",36),i(),e(95,"div",37),g(96,Pe,2,0,"button",38)(97,Me,2,0,"button",39),i()()()),s&2&&(l("showModal",t.productosService.showModalAbm),o(4),h(" ",t.productosService.estadoAbm=="crear"?"Creando producto":"Editando producto"," "),o(11),l("ngModel",t.productosService.abmForm.descripcion),o(6),l("ngModel",t.productosService.abmForm.balanza),o(11),l("ngModel",t.productosService.abmForm.unidadMedidaId),o(3),l("ngForOf",t.unidadesMedida),o(5),l("ngModel",t.productosService.abmForm.codigo),o(),l("ngIf",t.productosService.abmForm.balanza==="false"),o(8),l("ngModel",t.productosService.abmForm.precioCompra),o(4),l("disabled",!t.productosService.abmForm.precioCompra||t.productosService.abmForm.precioCompra<0)("ngModel",t.productosService.abmForm.porcentajeGanancia),o(7),l("disabled",t.productosService.abmForm.precioCompra>0&&t.productosService.abmForm.porcentajeGanancia>0)("ngModel",t.productosService.abmForm.precioVenta),o(6),l("ngModel",t.productosService.abmForm.alicuota),o(14),l("ngModel",t.productosService.abmForm.cantidad),o(4),l("ngModel",t.productosService.abmForm.alertaStock),o(7),l("ngIf",t.productosService.abmForm.alertaStock==="true"),o(2),l("ngModel",t.productosService.abmForm.cantidadMinima)("disabled",t.productosService.abmForm.alertaStock==="false"),o(),l("ngIf",t.productosService.productoSeleccionado&&t.productosService.estadoAbm==="editar"),o(2),l("ngIf",t.productosService.estadoAbm=="crear"),o(),l("ngIf",t.productosService.estadoAbm=="editar"))},dependencies:[A,ee,F,D,j,N,ie,ne,G,V,oe,z,ae,ce,I],encapsulation:2});let n=r;return n})();function Te(n,r){if(n&1){let d=x();e(0,"button",47),_("click",function(){S(d);let s=f();return b(s.productosService.abrirAbm("crear"))}),v(),e(1,"svg",48),p(2,"path",49),i()()}}function Fe(n,r){n&1&&(v(),e(0,"svg",31)(1,"style"),a(2," @keyframes n-info-2 { 0%, to { transform: rotate(0deg); transform-origin: top center } 10%, 90% { transform: rotate(2deg) } 20%, 40%, 60% { transform: rotate(-6deg) } 30%, 50%, 70% { transform: rotate(6deg) } 80% { transform: rotate(-2deg) } } "),i(),p(3,"path",50),e(4,"g",51),p(5,"path",52)(6,"path",53)(7,"circle",54),i()())}function Ae(n,r){n&1&&(v(),e(0,"svg",31)(1,"style"),a(2," @keyframes n-snooze { 0% { transform: scale(.2); opacity: .8 } 80% { transform: scale(1.2); opacity: 1 } to { transform: scale(1.2); opacity: 0 } } "),i(),p(3,"path",50)(4,"path",55)(5,"path",56),i())}function Ie(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function Ve(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function ze(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function Ge(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function je(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Ne(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function De(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function Be(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Le(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function Oe(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function Ue(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Ze(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function $e(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function He(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Re(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function qe(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function Qe(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Je(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function Ke(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function We(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function Xe(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function Ye(n,r){n&1&&(v(),e(0,"svg",57),p(1,"polyline",58),i())}function et(n,r){n&1&&(v(),e(0,"svg",59),p(1,"polyline",60),i())}function tt(n,r){n&1&&(v(),e(0,"svg",61),p(1,"line",62),i())}function it(n,r){if(n&1){let d=x();e(0,"th",63)(1,"div",37),_("click",function(){S(d);let s=f();return b(s.ordenarPorColumna("activo"))}),e(2,"span"),a(3," Estado "),i(),e(4,"span",64),g(5,Ye,2,0,"svg",39)(6,et,2,0,"svg",40)(7,tt,2,0,"svg",41),i()()()}if(n&2){let d=f();o(5),l("ngIf",d.ordenar.columna=="activo"&&d.ordenar.direccion=="asc"),o(),l("ngIf",d.ordenar.columna=="activo"&&d.ordenar.direccion=="desc"),o(),l("ngIf",d.ordenar.columna!="activo")}}function nt(n,r){n&1&&(e(0,"th",63),a(1," Acci\xF3n "),i())}var ot=(n,r)=>r.id;function rt(n,r){if(n&1){let d=x();e(0,"td",66)(1,"app-pastilla-estado",73),_("click",function(){S(d);let s=f().$implicit,t=f(2);return b(t.actualizarEstado(s))}),i()()}if(n&2){let d=f().$implicit;o(),l("activo",d.activo)}}function at(n,r){if(n&1){let d=x();e(0,"td",74)(1,"span",75)(2,"button",76),_("click",function(){S(d);let s=f().$implicit,t=f(2);return b(t.productosService.abrirAbm("editar",s))}),v(),e(3,"svg",48),p(4,"path",77),i()()()()}}var ct=n=>({"bg-red-50":n}),lt=(n,r)=>({"text-gray-400 italic":n,"text-gray-900":r}),dt=(n,r)=>({"text-red-500 font-semibold":n,"text-black":r});function st(n,r){if(n&1&&(e(0,"tr",65)(1,"td",66)(2,"p",67),a(3),i()(),e(4,"td",66)(5,"p",68),a(6),i()(),e(7,"td",66)(8,"p",69),a(9),i()(),e(10,"td",66)(11,"p",68),a(12),i()(),e(13,"td",66)(14,"p",68),a(15),w(16,"moneda"),i()(),e(17,"td",66)(18,"p",70),a(19),i()(),e(20,"td",66)(21,"p",68),a(22),i()(),g(23,rt,2,1,"td",71)(24,at,5,0,"td",72),i()),n&2){let d=r.$implicit,c=f(2);l("ngClass",K(14,ct,d.cantidadMinima&&d.cantidad<=d.cantidadMinima&&d.alertaStock)),o(2),l("ngClass",E(16,lt,!d.codigo,!d.codigo)),o(),h(" ",d.codigo?d.codigo:"Sin c\xF3digo"," "),o(3),h(" ",d.balanza?"Balanza":"Normal"," "),o(3),h(" ",d.descripcion," "),o(3),h(" ",d.unidadMedida.descripcion," "),o(3),h(" $",T(16,12,d.precioVenta)," "),o(3),l("ngClass",E(19,dt,d.cantidad<0,d.cantidad>=0)),o(),h(" ",d.cantidad," "),o(3),h(" ",d.alertaStock?"SI":"NO"," "),o(),l("appPermisos",c.permiso_escritura),o(),l("appPermisos",c.permiso_escritura)}}function mt(n,r){n&1&&(e(0,"tr",78),a(1," a "),i(),e(2,"tr",79)(3,"td",80),a(4," No se encontraron productos "),i()())}var pt=(n,r)=>({itemsPerPage:n,currentPage:r});function ut(n,r){if(n&1&&(e(0,"tbody"),q(1,st,25,22,"tr",81,ot,!1,mt,5,0),w(4,"paginate"),w(5,"filtroProductos"),i()),n&2){let d=f();o(),Q(W(4,1,X(5,4,d.productosService.productos,d.filtro.parametro,d.filtro.activo),E(8,pt,d.cantidadItems,d.paginaActual)))}}function vt(n,r){if(n&1){let d=x();e(0,"div",82)(1,"pagination-controls",83),_("pageChange",function(s){S(d);let t=f();return b(t.paginaActual=s)}),i()()}}var _t=(n,r)=>({"bg-purple-100 border-purple-400":n,"bg-white":r}),Zt=(()=>{let r=class r{constructor(c,s,t){this.productosService=c,this.alertService=s,this.dataService=t,this.permiso_escritura=["PRODUCTOS_ALL"],this.alertaStock=!1,this.showAlertaStock=!1,this.productosTMP=[],this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:"desc",columna:"descripcion"}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Productos",this.alertService.loading(),this.listarProductos()}listarProductos(){let c={direccion:this.ordenar.direccion,columna:this.ordenar.columna};this.productosService.listarProductos(c).subscribe({next:({productos:s})=>{this.productosService.productos=s,this.productosTMP=s,this.alertService.close()},error:({error:s})=>this.alertService.errorApi(s.message)})}nuevoProducto(c){this.productosService.productos=[c,...this.productosService.productos],this.alertService.close()}actualizarProducto(c){let s=this.productosService.productos.findIndex(t=>t.id===c.id);this.productosService.productos[s]=c,this.productosService.productos=[...this.productosService.productos],this.alertService.close()}actualizarEstado(c){let{id:s,activo:t}=c;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:u})=>{u&&(this.alertService.loading(),this.productosService.actualizarProducto(s,{activo:!t}).subscribe({next:()=>{this.alertService.loading(),this.listarProductos()},error:({error:m})=>this.alertService.errorApi(m.message)}))})}filtrarAlertaStock(){this.showAlertaStock=!this.showAlertaStock,this.showAlertaStock?this.productosService.productos=this.productosService.productos.filter(c=>c.alertaStock&&c.cantidad<c.cantidadMinima):this.productosService.productos=this.productosTMP}ordenarProductos(){this.ordenarPorColumna("descripcion")}filtrarActivos(c){this.paginaActual=1,this.filtro.activo=c}filtrarParametro(c){this.paginaActual=1,this.filtro.parametro=c}ordenarPorColumna(c){this.ordenar.columna=c,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarProductos()}};r.\u0275fac=function(s){return new(s||r)(C(O),C(B),C(L))},r.\u0275cmp=P({type:r,selectors:[["app-productos"]],standalone:!0,features:[M],decls:111,vars:33,consts:[[3,"insertEvent","updateEvent"],[1,"w-full","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nuevo producto","class","boton-nuevo-header",3,"click",4,"appPermisos"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative","w-full","md:w-auto"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"bg-white","text-sm","focus:outline-none","w-full","md:w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],["title","Filtrar por alerta de stock",1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngClass","click"],["viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"cursor-pointer","flex","w-max","items-center","focus:outline-none",3,"click"],[1,"cursor-pointer","w-max","flex","items-center","focus:outline-none",3,"click"],["class","px-5 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-900 tracking-wider",4,"appPermisos"],[4,"ngIf"],["class","px-5 text-sm py-5 mt-4 bg-white border-t flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],["title","Nuevo producto",1,"boton-nuevo-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["stroke","#0A0A30","stroke-width","1.5","d","M12 3.398a5 5 0 00-5 5v2c0 .758-.442 1.505-1.005 2.012A3 3 0 008 17.642h8a3 3 0 002.005-5.232C17.442 11.903 17 11.156 17 10.398v-2a5 5 0 00-5-5z"],[2,"animation","n-info-2 1.5s cubic-bezier(.455,.03,.515,.955) both infinite"],["stroke","#0A0A30","stroke-linecap","round","stroke-width","1.5","d","M14.39 20.312l-.043.01a9.715 9.715 0 01-4.67-.01"],["stroke","#4F46E5","stroke-linecap","round","stroke-width","1.5","d","M12 7.923v3.206"],["cx","12","cy","13.245","r",".832","fill","#4F46E5"],["stroke","#0A0A30","stroke-linecap","round","stroke-width","1.5","d","M14.39 20.312l-.043.01a9.714 9.714 0 01-4.67-.01"],["fill","#4F46E5","d","M14.48 13.918H9.676l2.648-3.642H9.677v-.911h4.802l-2.639 3.641h2.64v.912z",2,"animation","n-snooze 1.5s cubic-bezier(.165,.84,.44,1) infinite both","transform-origin","center center"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"ml-2"],[1,"animate__animated","animate__fadeIn",3,"ngClass"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"w-max","whitespace-no-wrap","p-2",3,"ngClass"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"text-gray-900","whitespace-no-wrap"],[1,"w-max","whitespace-no-wrap",3,"ngClass"],["class","px-5 py-2 border-b border-gray-200 text-xs",4,"appPermisos"],["class","px-5 py-2 border-b border-gray-200 text-xs text-center",4,"appPermisos"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar producto",1,"boton-editar","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],[1,"p-4","text-white"],[1,"w-full"],["colspan","9",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated animate__fadeIn",3,"ngClass"],[1,"px-5","text-sm","py-5","mt-4","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(s,t){if(s&1){let u=x();e(0,"app-abm-producto",0),_("insertEvent",function(y){return t.nuevoProducto(y)})("updateEvent",function(y){return t.actualizarProducto(y)}),i(),e(1,"div",1)(2,"app-tarjeta-lista")(3,"div",2)(4,"div")(5,"div",3)(6,"div",4)(7,"h2",5),a(8," Productos "),i(),e(9,"p"),a(10),i()(),e(11,"div"),g(12,Te,3,0,"button",6),i()(),e(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"select",11,12),_("change",function(){S(u);let y=H(18);return b(t.filtrarActivos(y.value))}),e(19,"option",13),a(20," Activos "),i(),e(21,"option",14),a(22," Inactivos "),i(),e(23,"option",15),a(24," Todos "),i()(),e(25,"div",16),v(),e(26,"svg",17),p(27,"path",18),i()()()(),k(),e(28,"div",19)(29,"span",20),v(),e(30,"svg",21),p(31,"path",22),i()(),k(),e(32,"input",23,24),_("keyup",function(){S(u);let y=H(33);return b(t.filtrarParametro(y.value))}),i()(),e(34,"select",25),_("change",function(){return t.paginaActual=1})("ngModelChange",function(y){return t.cantidadItems=y}),e(35,"option",26),a(36," 10 elementos "),i(),e(37,"option",27),a(38," 20 elementos "),i(),e(39,"option",28),a(40," 50 elementos "),i(),e(41,"option",29),a(42," 100 elementos "),i()(),e(43,"button",30),_("click",function(){return t.filtrarAlertaStock()}),g(44,Fe,8,0,":svg:svg",31)(45,Ae,6,0),i()()(),e(46,"div",32)(47,"div",33)(48,"table",34)(49,"thead")(50,"tr",35)(51,"th",36)(52,"div",37),_("click",function(){return t.ordenarPorColumna("codigo")}),e(53,"span"),a(54," C\xF3digo "),i(),e(55,"span",38),g(56,Ie,2,0,"svg",39)(57,Ve,2,0,"svg",40)(58,ze,2,0,"svg",41),i()()(),e(59,"th",36)(60,"div",37),_("click",function(){return t.ordenarPorColumna("balanza")}),e(61,"span"),a(62," Tipo "),i(),e(63,"span",38),g(64,Ge,2,0,"svg",39)(65,je,2,0,"svg",40)(66,Ne,2,0,"svg",41),i()()(),e(67,"th",36)(68,"div",37),_("click",function(){return t.ordenarPorColumna("descripcion")}),e(69,"span"),a(70," Descripci\xF3n "),i(),e(71,"span",38),g(72,De,2,0,"svg",39)(73,Be,2,0,"svg",40)(74,Le,2,0,"svg",41),i()()(),e(75,"th",36)(76,"div",42),_("click",function(){return t.ordenarPorColumna("unidadMedida")}),e(77,"span"),a(78," Unidad de medida "),i(),e(79,"span",38),g(80,Oe,2,0,"svg",39)(81,Ue,2,0,"svg",40)(82,Ze,2,0,"svg",41),i()()(),e(83,"th",36)(84,"div",42),_("click",function(){return t.ordenarPorColumna("precioVenta")}),e(85,"span"),a(86," Precio venta "),i(),e(87,"span",38),g(88,$e,2,0,"svg",39)(89,He,2,0,"svg",40)(90,Re,2,0,"svg",41),i()()(),e(91,"th",36)(92,"div",37),_("click",function(){return t.ordenarPorColumna("cantidad")}),e(93,"span"),a(94," Cantidad "),i(),e(95,"span",38),g(96,qe,2,0,"svg",39)(97,Qe,2,0,"svg",40)(98,Je,2,0,"svg",41),i()()(),e(99,"th",36)(100,"div",43),_("click",function(){return t.ordenarPorColumna("alertaStock")}),e(101,"span"),a(102," Alerta stock "),i(),e(103,"span",38),g(104,Ke,2,0,"svg",39)(105,We,2,0,"svg",40)(106,Xe,2,0,"svg",41),i()()(),g(107,it,8,3,"th",44)(108,nt,2,0,"th",44),i()(),g(109,ut,6,11,"tbody",45),i()()()(),g(110,vt,2,0,"div",46),i()()()}s&2&&(o(10),h(" Total de productos: ",t.productosService.productos.length," "),o(2),l("appPermisos",t.permiso_escritura),o(22),l("ngModel",t.cantidadItems),o(9),l("ngClass",E(30,_t,t.showAlertaStock,!t.showAlertaStock)),o(),R(44,t.alertaStock?44:45),o(12),l("ngIf",t.ordenar.columna=="codigo"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="codigo"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="codigo"),o(6),l("ngIf",t.ordenar.columna=="balanza"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="balanza"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="balanza"),o(6),l("ngIf",t.ordenar.columna=="descripcion"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="descripcion"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="descripcion"),o(6),l("ngIf",t.ordenar.columna=="unidadMedida"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="unidadMedida"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="unidadMedida"),o(6),l("ngIf",t.ordenar.columna=="precioVenta"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="precioVenta"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="precioVenta"),o(6),l("ngIf",t.ordenar.columna=="cantidad"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="cantidad"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="cantidad"),o(6),l("ngIf",t.ordenar.columna=="alertaStock"&&t.ordenar.direccion=="asc"),o(),l("ngIf",t.ordenar.columna=="alertaStock"&&t.ordenar.direccion=="desc"),o(),l("ngIf",t.ordenar.columna!="alertaStock"),o(),l("appPermisos",t.permiso_escritura),o(),l("appPermisos",t.permiso_escritura),o(),l("ngIf",t.productosService.productos),o(),l("ngIf",t.productosService.productos.length>t.cantidadItems))},dependencies:[A,Y,F,D,j,N,G,V,z,ue,se,le,de,I,me,pe,ve,ge,re],encapsulation:2});let n=r;return n})();export{Zt as default};
