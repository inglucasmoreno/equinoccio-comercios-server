import{a as z}from"./chunk-22XSY4EJ.js";import"./chunk-55FSNNZ2.js";import{c as w}from"./chunk-6M6LJACB.js";import{a as j,c as F,e as D,o as R}from"./chunk-B2HCO65P.js";import{a as U}from"./chunk-BPTFILPP.js";import{b as B}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{e as M,g as I,h as E,u as T,v as P}from"./chunk-BJBUZF5B.js";import{$a as p,Bb as k,Ra as u,Sa as h,V as y,_ as A,ba as b,cb as f,db as V,ga as l,gb as o,ha as d,hb as r,ia as C,ib as _,lb as x,pb as g,qb as s,ub as m,vb as v}from"./chunk-GQGQXF3A.js";var S=T.base_url+"/config-afip",G=(()=>{let a=class a{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(i){this.http=i}getConfiguraciones(){return this.http.get(`${S}`,{headers:this.getToken})}crearConfiguraciones(i){return this.http.post(S,i,{headers:this.getToken})}actualizarConfiguraciones(i,e){return this.http.patch(`${S}/${i}`,e,{headers:this.getToken})}};a.\u0275fac=function(e){return new(e||a)(A(E))},a.\u0275prov=y({token:a,factory:a.\u0275fac,providedIn:"root"});let c=a;return c})();function K(c,a){if(c&1){let t=x();o(0,"div",2)(1,"div",3),_(2,"img",4),o(3,"h1",5),m(4," No se encontraron configuraciones "),r(),o(5,"button",6),g("click",function(){l(t);let e=s();return d(e.inicializarConfiguraciones())}),m(6," Inicializar configuraciones "),r()()()}}function H(c,a){c&1&&(C(),o(0,"svg",15),_(1,"path",16),r())}function J(c,a){c&1&&(C(),o(0,"svg",15),_(1,"path",17),r())}function L(c,a){if(c&1){let t=x();o(0,"div")(1,"div",18)(2,"div",19)(3,"p",11),m(4," Razon Social "),r(),o(5,"input",20),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.razonSocial=e)}),r()(),o(6,"div",21)(7,"p",11),m(8," IIBB "),r(),o(9,"input",22),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.iibb=e)}),r()()(),o(10,"div",23)(11,"div",19)(12,"p",11),m(13," Domicilio "),r(),o(14,"input",24),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.domicilio=e)}),r()(),o(15,"div",21)(16,"p",11),m(17," Inicio de actividad "),r(),o(18,"input",25),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.inicioActividad=e)}),r()()(),o(19,"div",26)(20,"div",19)(21,"p",11)(22,"span",27),m(23," * "),r(),m(24," CUIT "),r(),o(25,"input",28),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.cuit=e)}),r()(),o(26,"div",29)(27,"p",11)(28,"span",27),m(29," * "),r(),m(30," Punto de venta "),r(),o(31,"input",22),g("keyup.enter",function(){l(t);let e=s(2);return d(e.actualizarConfiguraciones())})("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.puntoVenta=e)}),r()()()()}if(c&2){let t=s(2);u(5),p("ngModel",t.configuraciones.razonSocial),u(4),p("ngModel",t.configuraciones.iibb),u(5),p("ngModel",t.configuraciones.domicilio),u(4),p("ngModel",t.configuraciones.inicioActividad),u(7),p("ngModel",t.configuraciones.cuit),u(6),p("ngModel",t.configuraciones.puntoVenta)}}function O(c,a){c&1&&(C(),o(0,"svg",15),_(1,"path",16),r())}function Y(c,a){c&1&&(C(),o(0,"svg",15),_(1,"path",17),r())}function Q(c,a){if(c&1){let t=x();o(0,"div")(1,"div",30)(2,"p",31),m(3," Cert "),r(),o(4,"textarea",32),g("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.cert=e)}),m(5),r()(),o(6,"div",30)(7,"p",33),m(8," Key "),r(),o(9,"textarea",34),g("ngModelChange",function(e){l(t);let n=s(2);return d(n.configuraciones.key=e)}),m(10),r()()()}if(c&2){let t=s(2);u(4),p("ngModel",t.configuraciones.cert),u(),v(t.configuraciones.cert),u(4),p("ngModel",t.configuraciones.key),u(),v(t.configuraciones.key)}}function W(c,a){if(c&1){let t=x();o(0,"div",7)(1,"h1",8),m(2," Configuraciones - AFIP "),r(),o(3,"div",9)(4,"div",10),g("click",function(){l(t);let e=s();return d(e.showSeccionDatosFacturacion=!e.showSeccionDatosFacturacion)}),o(5,"h2",11),m(6," Datos de facturacion "),r(),o(7,"div"),f(8,H,2,0,"svg",12)(9,J,2,0,"svg",12),r()(),f(10,L,32,6,"div",13),o(11,"div",10),g("click",function(){l(t);let e=s();return d(e.showSeccionConfiguraciones=!e.showSeccionConfiguraciones)}),o(12,"h2",11),m(13," Listado de certificados "),r(),o(14,"div"),f(15,O,2,0,"svg",12)(16,Y,2,0,"svg",12),r()(),f(17,Q,11,4,"div",13),r(),o(18,"button",14),g("click",function(){l(t);let e=s();return d(e.actualizarConfiguraciones())}),m(19," Actualizar configuraciones "),r()()}if(c&2){let t=s();u(8),p("ngIf",t.showSeccionDatosFacturacion),u(),p("ngIf",!t.showSeccionDatosFacturacion),u(),p("ngIf",t.showSeccionDatosFacturacion),u(5),p("ngIf",t.showSeccionConfiguraciones),u(),p("ngIf",!t.showSeccionConfiguraciones),u(),p("ngIf",t.showSeccionConfiguraciones)}}var pe=(()=>{let a=class a{constructor(i,e,n,N){this.authService=i,this.dataService=e,this.alertService=n,this.configAfipService=N,this.showSeccionConfiguraciones=!1,this.showSeccionDatosFacturacion=!1,this.configuraciones={id:"",cert:"",key:"",cuit:"",puntoVenta:"",razonSocial:"",iibb:"",domicilio:"",inicioActividad:""}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Configuraciones AFIP",U.from(".gsap-contenido",{y:100,opacity:0,duration:.2}),this.alertService.loading(),this.obtenerConfiguraciones()}obtenerConfiguraciones(){this.configAfipService.getConfiguraciones().subscribe({next:({configuraciones:i})=>{this.configuraciones=i,i&&(this.configuraciones.cert=decodeURIComponent(i.cert),this.configuraciones.key=decodeURIComponent(i.key),this.configuraciones.cuit=i.cuit,this.configuraciones.puntoVenta=i.puntoVenta,this.configuraciones.razonSocial=i.razonSocial,this.configuraciones.iibb=i.iibb,this.configuraciones.domicilio=i.domicilio,this.configuraciones.inicioActividad=w(i.inicioActividad,"yyyy-MM-dd")),this.alertService.close()},error:({error:i})=>this.alertService.errorApi(i.message)})}inicializarConfiguraciones(){this.alertService.question({msg:"Inicializando configuraciones",buttonText:"Inicializar"}).then(({isConfirmed:i})=>{if(i){this.alertService.loading();let e={cert:"",key:"",cuit:"",puntoVenta:"",creatorUserId:this.authService.usuario.userId};this.configAfipService.crearConfiguraciones(e).subscribe({next:({configuraciones:n})=>{this.configuraciones=n,this.configuraciones.cert=n.cert.trim(),this.configuraciones.key=n.key.trim(),this.alertService.success("Inicializacion completada")},error:({error:n})=>this.alertService.errorApi(n.message)})}})}actualizarConfiguraciones(){this.alertService.question({msg:"Actualizando configuraciones",buttonText:"Actualizar"}).then(({isConfirmed:i})=>{if(i){this.alertService.loading();let e={cert:encodeURIComponent(this.configuraciones.cert),key:encodeURIComponent(this.configuraciones.key),cuit:this.configuraciones.cuit,razonSocial:this.configuraciones.razonSocial,iibb:this.configuraciones.iibb,domicilio:this.configuraciones.domicilio,inicioActividad:this.configuraciones.inicioActividad,puntoVenta:this.configuraciones.puntoVenta,creatorUserId:this.authService.usuario.userId};this.configAfipService.actualizarConfiguraciones(this.configuraciones.id,e).subscribe({next:({configuraciones:n})=>{this.configuraciones.cert=decodeURIComponent(n.cert),this.configuraciones.key=decodeURIComponent(n.key),this.configuraciones.cuit=n.cuit,this.configuraciones.puntoVenta=n.puntoVenta,this.configuraciones.razonSocial=n.razonSocial,this.configuraciones.iibb=n.iibb,this.configuraciones.domicilio=n.domicilio,this.configuraciones.inicioActividad=w(n.inicioActividad,"yyyy-MM-dd"),this.alertService.success("Configuraciones actualizadas correctamente!")},error:({error:n})=>this.alertService.errorApi(n.message)})}})}};a.\u0275fac=function(e){return new(e||a)(h(z),h(B),h(P),h(G))},a.\u0275cmp=b({type:a,selectors:[["app-configAfip"]],standalone:!0,features:[k],decls:3,vars:1,consts:[[1,"gsap-contenido"],["class","flex items-center justify-center h-screen"],[1,"flex","items-center","justify-center","h-screen"],[1,"text-center"],["src","assets/img/afip.png","alt","afip.png",1,"w-1/2","mx-auto"],[1,"text-xl","md:text-4xl","text-gray-500","mt-5"],[1,"bg-secondaryColor","hover:opacity-90","p-3","rounded","w-max","text-white","mt-7",3,"click"],[1,"mt-5"],[1,"font-semibold","text-md","md:text-xl","text-center","bg-gray-100","p-2","w-11/12","md:w-1/2","mx-auto","border","border-gray-400"],[1,"text-sm","mt-4","text-center"],[1,"bg-gray-100","w-11/12","md:w-1/2","flex","items-center","justify-between","cursor-pointer","text-left","mt-4","mx-auto","p-2","border","border-gray-400",3,"click"],[1,"font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","class","w-5 h-5",4,"ngIf"],[4,"ngIf"],[1,"boton-editar","w-11/12","mb-4","md:w-1/2","mx-auto","text-center","mt-4","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","m19.5 8.25-7.5 7.5-7.5-7.5"],["stroke-linecap","round","stroke-linejoin","round","d","m4.5 15.75 7.5-7.5 7.5 7.5"],[1,"md:flex","w-11/12","md:w-1/2","mt-2","mx-auto","items-center"],[1,"md:w-1/2"],["placeholder","Ej. Equinoccio Technology",1,"input-generico","w-full","mt-2","text-center",3,"ngModel","keyup.enter","ngModelChange"],[1,"md:w-1/2","md:ml-2","mt-2","md:mt-0"],["placeholder","Ej. 4",1,"input-generico","w-full","mt-2","text-center",3,"ngModel","keyup.enter","ngModelChange"],[1,"md:flex","w-11/12","mt-2","md:mt-4","md:w-1/2","mx-auto","items-center"],["placeholder","Ej. 9 de Julio 811",1,"input-generico","w-full","mt-2","text-center",3,"ngModel","keyup.enter","ngModelChange"],["type","date",1,"input-generico","w-full","mt-2","text-center",3,"ngModel","keyup.enter","ngModelChange"],[1,"md:flex","w-11/12","md:w-1/2","mt-2","md:mt-4","mx-auto","items-center"],[1,"text-red-700"],["placeholder","Ej. 24340603989",1,"input-generico","w-full","mt-2","text-center",3,"ngModel","keyup.enter","ngModelChange"],[1,"md:w-1/2","md:ml-2","mt-2"],[1,"mt-4"],[1,"font-semibold","bg-yellow-500","p-2","w-11/12","md:w-1/2","rounded","mx-auto"],["placeholder","Ingresar CERTIFICATE",1,"border","border-gray-400","p-2","w-11/12","md:w-1/2","mt-2","h-40",3,"ngModel","ngModelChange"],[1,"font-semibold","bg-green-500","p-2","w-11/12","md:w-1/2","rounded","mx-auto"],["placeholder","Ingresar RSA PRIVATE KEY",1,"border","border-gray-400","p-2","w-11/12","md:w-1/2","h-40","mt-2","ml-2",3,"ngModel","ngModelChange"]],template:function(e,n){e&1&&(o(0,"div",0),f(1,K,7,0,"div",1)(2,W,20,6),r()),e&2&&(u(),V(1,n.configuraciones?2:1))},dependencies:[I,M,R,j,F,D],encapsulation:2});let c=a;return c})();export{pe as default};
