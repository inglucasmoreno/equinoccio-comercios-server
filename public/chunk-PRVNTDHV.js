import{a as q}from"./chunk-22XSY4EJ.js";import{a as ie}from"./chunk-55FSNNZ2.js";import{d as te}from"./chunk-6M6LJACB.js";import{a as oe}from"./chunk-UQYYX3ZV.js";import{a as le}from"./chunk-ZOJYGP6Z.js";import{a as re,b as ne,c as ae}from"./chunk-U34JSWL2.js";import{a as Q,c as R,e as J,j as K,k as W,l as X,o as Y}from"./chunk-B2HCO65P.js";import"./chunk-BPTFILPP.js";import{b as ee}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{e as N,g as $,h as H,t as U,u as O,v as Z}from"./chunk-BJBUZF5B.js";import{$a as d,Bb as z,Eb as B,Gb as C,Hb as I,Ib as G,Jb as D,Ra as c,Sa as M,V as T,_ as V,ba as A,cb as x,ea as j,eb as F,fb as P,ga as v,gb as e,ha as _,hb as i,ia as f,ib as g,ja as y,lb as w,pb as u,qb as b,tb as E,ub as l,wb as S,xb as L}from"./chunk-GQGQXF3A.js";var se=(()=>{let o=class o{transform(n,a,t){let m,p;return t==="true"?m=!0:t==="false"?m=!1:m=null,m!==null?p=n.filter(h=>h.activo==m):m===null&&(p=n),a=a.toLocaleLowerCase(),a.length!==0?p.filter(h=>h.descripcion.toLocaleLowerCase().includes(a)):p}};o.\u0275fac=function(a){return new(a||o)},o.\u0275pipe=j({name:"filtroMarcas",type:o,pure:!0,standalone:!0});let r=o;return r})();var k=O.base_url+"/marcas",de=(()=>{let o=class o{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(n){this.http=n}getMarca(n){return this.http.get(`${k}/${n}`,{headers:this.getToken})}listarMarcas({direccion:n="desc",columna:a="descripcion"}){return this.http.get(k,{params:{direccion:String(n),columna:a},headers:this.getToken})}nuevaMarca(n){return this.http.post(k,n,{headers:this.getToken})}actualizarMarca(n,a){return this.http.patch(`${k}/${n}`,a,{headers:this.getToken})}};o.\u0275fac=function(a){return new(a||o)(V(H))},o.\u0275prov=T({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();function pe(r,o){if(r&1&&(e(0,"div",62)(1,"div",63)(2,"p",64),l(3," Fecha de alta "),i(),e(4,"div",65),l(5),C(6,"fecha"),i()(),e(7,"div",66)(8,"p",64),l(9," Usuario creador "),i(),e(10,"div",67),l(11),i()()()),r&2){let s=b();c(5),S(" ",I(6,3,s.marcaSeleccionada.createdAt)," "),c(6),L(" ",s.marcaSeleccionada.creatorUser.apellido.toLowerCase()," ",s.marcaSeleccionada.creatorUser.nombre.toLowerCase()," ")}}function ue(r,o){if(r&1){let s=w();e(0,"button",68),u("click",function(){v(s);let a=b();return _(a.nuevaMarca())}),l(1," Crear marca "),i()}}function fe(r,o){if(r&1){let s=w();e(0,"button",69),u("click",function(){v(s);let a=b();return _(a.actualizarMarca())}),l(1," Actualizar marca "),i()}}function ge(r,o){r&1&&(f(),e(0,"svg",70),g(1,"polyline",71),i())}function he(r,o){r&1&&(f(),e(0,"svg",72),g(1,"polyline",73),i())}function ve(r,o){r&1&&(f(),e(0,"svg",74),g(1,"line",75),i())}function _e(r,o){r&1&&(f(),e(0,"svg",70),g(1,"polyline",71),i())}function xe(r,o){r&1&&(f(),e(0,"svg",72),g(1,"polyline",73),i())}function be(r,o){r&1&&(f(),e(0,"svg",74),g(1,"line",75),i())}function we(r,o){r&1&&(f(),e(0,"svg",70),g(1,"polyline",71),i())}function Se(r,o){r&1&&(f(),e(0,"svg",72),g(1,"polyline",73),i())}function ye(r,o){r&1&&(f(),e(0,"svg",74),g(1,"line",75),i())}var Me=(r,o)=>o.id;function Ce(r,o){if(r&1){let s=w();e(0,"tr",76)(1,"td",77)(2,"p",78),l(3),i()(),e(4,"td",77)(5,"p",79),l(6),C(7,"fecha"),i()(),e(8,"td",77)(9,"app-pastilla-estado",80),u("click",function(){let t=v(s).$implicit,m=b(2);return _(m.actualizarEstado(t))}),i()(),e(10,"td",81)(11,"span",82)(12,"button",83),u("click",function(){let t=v(s).$implicit,m=b(2);return _(m.abrirModal("editar",t))}),f(),e(13,"svg",21),g(14,"path",84),i()()()()()}if(r&2){let s=o.$implicit;c(3),S(" ",s.descripcion," "),c(3),S(" ",I(7,3,s.createdAt)," "),c(3),d("activo",s.activo)}}function ke(r,o){r&1&&(e(0,"tr",85),l(1," a "),i(),e(2,"tr",86)(3,"td",87),l(4," No se encontraron marcas "),i()())}var Ee=(r,o)=>({itemsPerPage:r,currentPage:o});function Ie(r,o){if(r&1&&(e(0,"tbody"),F(1,Ce,15,5,"tr",88,Me,!1,ke,5,0),C(4,"paginate"),C(5,"filtroMarcas"),i()),r&2){let s=b();c(),P(G(4,1,D(5,4,s.marcas,s.filtro.parametro,s.filtro.activo),B(8,Ee,s.cantidadItems,s.paginaActual)))}}function Te(r,o){if(r&1){let s=w();e(0,"div",89)(1,"pagination-controls",90),u("pageChange",function(a){v(s);let t=b();return _(t.paginaActual=a)}),i()()}}var Je=(()=>{let o=class o{constructor(n,a,t,m){this.marcasService=n,this.authService=a,this.alertService=t,this.dataService=m,this.showModalMarca=!1,this.estadoFormulario="crear",this.idMarca="",this.marcas=[],this.descripcion="",this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:"desc",columna:"descripcion"}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Marcas",this.alertService.loading(),this.listarMarcas()}abrirModal(n,a=null){this.reiniciarFormulario(),this.descripcion="",this.idMarca="",n==="editar"?this.getMarca(a):this.showModalMarca=!0,this.estadoFormulario=n}getMarca(n){this.alertService.loading(),this.idMarca=n.id,this.marcaSeleccionada=n,this.marcasService.getMarca(n.id).subscribe({next:({marca:a})=>{this.descripcion=a.descripcion,this.alertService.close(),this.showModalMarca=!0},error:({error:a})=>this.alertService.errorApi(a.message)})}listarMarcas(){let n={direccion:this.ordenar.direccion,columna:this.ordenar.columna};this.marcasService.listarMarcas(n).subscribe({next:({marcas:a})=>{this.marcas=a,this.showModalMarca=!1,this.alertService.close()},error:({error:a})=>this.alertService.errorApi(a.message)})}nuevaMarca(){if(this.descripcion.trim()===""){this.alertService.info("Debes colocar una descripci\xF3n");return}this.alertService.loading();let n={descripcion:this.descripcion,creatorUserId:this.authService.usuario.userId};this.marcasService.nuevaMarca(n).subscribe({next:()=>{this.alertService.loading(),this.listarMarcas()},error:({error:a})=>this.alertService.errorApi(a.message)})}actualizarMarca(){if(this.descripcion.trim()===""){this.alertService.info("Debes colocar una descripci\xF3n");return}this.alertService.loading();let n={descripcion:this.descripcion};this.marcasService.actualizarMarca(this.idMarca,n).subscribe({next:()=>{this.alertService.loading(),this.listarMarcas()},error:({error:a})=>this.alertService.errorApi(a.message)})}actualizarEstado(n){let{id:a,activo:t}=n;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:m})=>{m&&(this.alertService.loading(),this.marcasService.actualizarMarca(a,{activo:!t}).subscribe({next:()=>{this.alertService.loading(),this.listarMarcas()},error:({error:p})=>this.alertService.errorApi(p.message)}))})}reiniciarFormulario(){this.descripcion=""}filtrarActivos(n){this.paginaActual=1,this.filtro.activo=n}filtrarParametro(n){this.paginaActual=1,this.filtro.parametro=n}ordenarPorColumna(n){this.ordenar.columna=n,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarMarcas()}};o.\u0275fac=function(a){return new(a||o)(M(de),M(q),M(Z),M(ee))},o.\u0275cmp=A({type:o,selectors:[["app-marcas"]],standalone:!0,features:[z],decls:95,vars:19,consts:[[3,"showModal"],[3,"keyup.enter"],[1,"flex","items-center","justify-between","bg-gray-800","rounded-t","p-2"],[1,"text-white","px-2","py-1","rounded-t","text-lg"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"cursor-pointer","feather","feather-x","text-white","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"px-4","pt-2","max-h-96","overflow-y-auto","text-sm"],[1,"font-semibold"],[1,"text-red-500"],["placeholder","Ej. Pepsi","type","text",1,"input-generico","w-full","mt-2",3,"ngModel","ngModelChange"],["class","xl:flex items-center mt-4",4,"ngIf"],[1,"px-2","pb-2"],["class","boton-crear w-full mt-4",3,"click",4,"ngIf"],["class","boton-editar w-full mt-4",3,"click",4,"ngIf"],[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nueva marca",1,"boton-nuevo-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[4,"ngIf"],["class","px-5 text-sm py-5 mt-4 bg-white border-t flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],[1,"xl:flex","items-center","mt-4"],[1,"xl:w-1/2"],[1,"font-semibold","text-sm"],[1,"border","text-sm","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"xl:ml-4","xl:w-1/2","mt-4","xl:mt-0"],[1,"border","text-sm","capitalize","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"boton-crear","w-full","mt-4",3,"click"],[1,"boton-editar","w-full","mt-4",3,"click"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"animate__animated","animate__fadeIn"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"text-gray-900","whitespace-no-wrap"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar marca",1,"boton-editar","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],[1,"p-4","text-white"],[1,"w-full"],["colspan","4",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated animate__fadeIn"],[1,"px-5","text-sm","py-5","mt-4","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(a,t){if(a&1){let m=w();e(0,"app-modal",0)(1,"div",1),u("keyup.enter",function(){return t.estadoFormulario==="crear"?t.nuevaMarca():t.actualizarMarca()}),e(2,"div",2)(3,"h1",3),l(4),i(),f(),e(5,"svg",4),u("click",function(){return t.showModalMarca=!1}),g(6,"line",5)(7,"line",6),i()(),y(),e(8,"div",7)(9,"p",8)(10,"span",9),l(11," * "),i(),l(12," Descripci\xF3n "),i(),e(13,"input",10),u("ngModelChange",function(h){return t.descripcion=h}),i(),x(14,pe,12,5,"div",11),i(),e(15,"div",12),x(16,ue,2,0,"button",13)(17,fe,2,0,"button",14),i()()(),e(18,"div",15)(19,"app-tarjeta-lista")(20,"div",16)(21,"div")(22,"div",17)(23,"div",18)(24,"h2",19),l(25," Marcas "),i(),e(26,"p"),l(27),i()(),e(28,"div")(29,"button",20),u("click",function(){return t.abrirModal("crear")}),f(),e(30,"svg",21),g(31,"path",22),i()()()(),y(),e(32,"div",23)(33,"div",24)(34,"div",25)(35,"div",26)(36,"select",27,28),u("change",function(){v(m);let h=E(37);return _(t.filtrarActivos(h.value))}),e(38,"option",29),l(39," Activos "),i(),e(40,"option",30),l(41," Inactivos "),i(),e(42,"option",31),l(43," Todos "),i()(),e(44,"div",32),f(),e(45,"svg",33),g(46,"path",34),i()()()(),y(),e(47,"div",35)(48,"span",36),f(),e(49,"svg",37),g(50,"path",38),i()(),y(),e(51,"input",39,40),u("keyup",function(){v(m);let h=E(52);return _(t.filtrarParametro(h.value))}),i()(),e(53,"select",41),u("change",function(){return t.paginaActual=1})("ngModelChange",function(h){return t.cantidadItems=h}),e(54,"option",42),l(55," 10 elementos "),i(),e(56,"option",43),l(57," 20 elementos "),i(),e(58,"option",44),l(59," 50 elementos "),i(),e(60,"option",45),l(61," 100 elementos "),i()()()(),e(62,"div",46)(63,"div",47)(64,"table",48)(65,"thead")(66,"tr",49)(67,"th",50)(68,"div",51),u("click",function(){return t.ordenarPorColumna("descripcion")}),e(69,"span"),l(70," Descripci\xF3n "),i(),e(71,"span",52),x(72,ge,2,0,"svg",53)(73,he,2,0,"svg",54)(74,ve,2,0,"svg",55),i()()(),e(75,"th",56)(76,"div",57),u("click",function(){return t.ordenarPorColumna("createdAt")}),e(77,"span"),l(78," Fecha de creaci\xF3n "),i(),e(79,"span",58),x(80,_e,2,0,"svg",53)(81,xe,2,0,"svg",54)(82,be,2,0,"svg",55),i()()(),e(83,"th",59)(84,"div",51),u("click",function(){return t.ordenarPorColumna("activo")}),e(85,"span"),l(86," Estado "),i(),e(87,"span",58),x(88,we,2,0,"svg",53)(89,Se,2,0,"svg",54)(90,ye,2,0,"svg",55),i()()(),e(91,"th",59),l(92," Acci\xF3n "),i()()(),x(93,Ie,6,11,"tbody",60),i()()()(),x(94,Te,2,0,"div",61),i()()()}a&2&&(d("showModal",t.showModalMarca),c(4),S(" ",t.estadoFormulario=="crear"?"Creando marca":"Editando marca"," "),c(9),d("ngModel",t.descripcion),c(),d("ngIf",t.marcaSeleccionada&&t.estadoFormulario==="editar"),c(2),d("ngIf",t.estadoFormulario=="crear"),c(),d("ngIf",t.estadoFormulario=="editar"),c(10),S(" Total de marcas: ",t.marcas.length," "),c(26),d("ngModel",t.cantidadItems),c(19),d("ngIf",t.ordenar.columna=="descripcion"&&t.ordenar.direccion=="asc"),c(),d("ngIf",t.ordenar.columna=="descripcion"&&t.ordenar.direccion=="desc"),c(),d("ngIf",t.ordenar.columna!="descripcion"),c(6),d("ngIf",t.ordenar.columna=="createdAt"&&t.ordenar.direccion=="asc"),c(),d("ngIf",t.ordenar.columna=="createdAt"&&t.ordenar.direccion=="desc"),c(),d("ngIf",t.ordenar.columna!="createdAt"),c(6),d("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion=="asc"),c(),d("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion=="desc"),c(),d("ngIf",t.ordenar.columna!="activo"),c(3),d("ngIf",t.marcas),c(),d("ngIf",t.marcas.length>t.cantidadItems))},dependencies:[$,N,Y,W,X,Q,K,R,J,te,ie,ae,re,ne,U,oe,le,se],encapsulation:2});let r=o;return r})();export{Je as default};
