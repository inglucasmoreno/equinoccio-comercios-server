import{a as f}from"./chunk-VSPTT5AX.js";import{h as l,u as c,v}from"./chunk-BJBUZF5B.js";import{V as h,_ as o}from"./chunk-GQGQXF3A.js";var n=c.base_url+"/reservas",m=(()=>{let r=class r{get getToken(){return{Authorization:localStorage.getItem("token")}}constructor(e){this.http=e}getReserva(e){return this.http.get(`${n}/${e}`,{headers:this.getToken})}listarReservas({direccion:e="desc",columna:t="id",parametro:a="",filtroPorVencer:i="false",estado:u="",fechaDesde:p="",fechaHasta:d=""}){return this.http.get(n,{params:{direccion:String(e),columna:t,filtroPorVencer:i,parametro:a,estado:u,fechaDesde:p,fechaHasta:d},headers:this.getToken})}reservasPorVencer(){return this.http.get(`${n}/estado/por-vencer`,{headers:this.getToken})}nuevaReserva(e){return this.http.post(n,e,{headers:this.getToken})}actualizarReserva(e,t){return this.http.patch(`${n}/${e}`,t,{headers:this.getToken})}};r.\u0275fac=function(t){return new(t||r)(o(l))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();var k=(()=>{let r=class r{constructor(e,t,a){this.alertService=e,this.reservasService=t,this.configGeneralesService=a,this.ubicacionActual="Dashboard",this.showMenu=!0,this.urlLogoEmpresa=c.base_url_files+"/img/Logo.png",this.formatoBalanza="",this.mascaraProducto="",this.mascaraPeso="",this.showAlertaReserva=!1,this.showAlertaReservaBarra=!1,this.cantidadReservasPorVencer=0,this.audioReserva=new Audio}obtenerConfigGenerales(){this.configGeneralesService.listarConfigGenerales({}).subscribe({next:({configGeneral:e})=>{let t="",a="";this.formatoBalanza=e[0].formatoBalanza;for(let i=0;i<this.formatoBalanza.length;i++)this.formatoBalanza[i]==="p"?t+="y":t+="n",this.formatoBalanza[i]==="e"?a+="y":a+="n";this.mascaraProducto=t,this.mascaraPeso=a},error:({error:e})=>this.alertService.errorApi(e.message)})}alertaReservas(){this.reservasService.reservasPorVencer().subscribe({next:({reservas:e})=>{e.length>0?(this.cantidadReservasPorVencer=e.length,this.showAlertaReserva=!0,this.showAlertaReservaBarra=!0,this.sonidoReserva()):(this.showAlertaReserva=!1,this.showAlertaReservaBarra=!1)},error:({error:e})=>this.alertService.errorApi(e.message)})}sonidoReserva(){this.audioReserva.src="assets/sounds/Alert-Reserva.wav",this.audioReserva.load(),this.audioReserva.play()}cerrarAlertaReservas(){this.showAlertaReserva=!1}};r.\u0275fac=function(t){return new(t||r)(o(v),o(m),o(f))},r.\u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();export{m as a,k as b};
