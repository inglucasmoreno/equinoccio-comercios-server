import{a as B}from"./chunk-JONP2NBF.js";import{a as te}from"./chunk-OGQQ44XV.js";import{a as K}from"./chunk-22XSY4EJ.js";import{a as ie}from"./chunk-55FSNNZ2.js";import{d as z}from"./chunk-6M6LJACB.js";import{a as se}from"./chunk-UQYYX3ZV.js";import{a as ae}from"./chunk-ZOJYGP6Z.js";import{a as ne,b as re,c as oe}from"./chunk-U34JSWL2.js";import{a as W,c as P,e as F,j as X,k as Y,l as Z,o as j}from"./chunk-B2HCO65P.js";import"./chunk-BPTFILPP.js";import{b as ee}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{e as A,g as V,t as M,v as L}from"./chunk-BJBUZF5B.js";import{$a as c,Bb as E,Eb as q,Gb as y,Hb as k,Ib as Q,Jb as J,Ra as l,Sa as I,Va as D,a as G,b as N,ba as C,cb as h,ea as U,eb as $,fb as H,ga as x,gb as t,ha as b,hb as i,ia as u,ib as g,ja as T,lb as S,pb as m,qb as f,tb as O,ub as p,wb as w,xb as R}from"./chunk-GQGQXF3A.js";var pe=(()=>{let o=class o{transform(s,r,n){let v,d;return n==="true"?v=!0:n==="false"?v=!1:v=null,v!==null?d=s.filter(_=>_.activo==v):v===null&&(d=s),r=r.toLocaleLowerCase(),r.length!==0?d.filter(_=>_.descripcion.toLocaleLowerCase().includes(r)):d}};o.\u0275fac=function(r){return new(r||o)},o.\u0275pipe=U({name:"filtroTiposIngresos",type:o,pure:!0,standalone:!0});let e=o;return e})();function fe(e,o){if(e&1&&(t(0,"div",14)(1,"div",15)(2,"p",16),p(3," Fecha de alta "),i(),t(4,"div",17),p(5),y(6,"fecha"),i()(),t(7,"div",18)(8,"p",16),p(9," Usuario creador "),i(),t(10,"div",19),p(11),i()()()),e&2){let a=f();l(5),w(" ",k(6,3,a.tiposIngresosService.tipoSeleccionado.createdAt)," "),l(6),R(" ",a.tiposIngresosService.tipoSeleccionado.creatorUser.apellido.toLowerCase()," ",a.tiposIngresosService.tipoSeleccionado.creatorUser.nombre.toLowerCase()," ")}}function ve(e,o){if(e&1){let a=S();t(0,"button",20),m("click",function(){x(a);let r=f();return b(r.nuevoTipo())}),p(1," Crear tipo "),i()}}function _e(e,o){if(e&1){let a=S();t(0,"button",21),m("click",function(){x(a);let r=f();return b(r.actualizarTipo())}),p(1," Actualizar tipo "),i()}}var ce=(()=>{let o=class o{constructor(s,r,n){this.authService=s,this.alertService=r,this.tiposIngresosService=n,this.insertEvent=new D,this.updateEvent=new D}ngOnInit(){}nuevoTipo(){if(this.tiposIngresosService.abmForm.descripcion==="")return this.alertService.info("La descripci\xF3n es obligatoria 2");this.alertService.loading();let s=N(G({},this.tiposIngresosService.abmForm),{creatorUserId:this.authService.usuario.userId});this.tiposIngresosService.nuevoTipo(s).subscribe({next:({tipo:r})=>{this.insertEvent.emit(r),this.tiposIngresosService.showModalAbm=!1},error:({error:r})=>this.alertService.errorApi(r.message)})}actualizarTipo(){if(this.tiposIngresosService.abmForm.descripcion==="")return this.alertService.info("La descripci\xF3n es obligatoria");this.alertService.loading();let s=N(G({},this.tiposIngresosService.abmForm),{creatorUserId:this.authService.usuario.userId});this.tiposIngresosService.actualizarTipo(this.tiposIngresosService.tipoSeleccionado.id,s).subscribe({next:({tipo:r})=>{this.updateEvent.emit(r),this.tiposIngresosService.showModalAbm=!1},error:({error:r})=>this.alertService.errorApi(r.message)})}submit(){this.tiposIngresosService.estadoAbm==="crear"?this.nuevoTipo():this.actualizarTipo()}};o.\u0275fac=function(r){return new(r||o)(I(K),I(L),I(B))},o.\u0275cmp=C({type:o,selectors:[["app-abm-tipo-ingreso"]],outputs:{insertEvent:"insertEvent",updateEvent:"updateEvent"},standalone:!0,features:[E],decls:18,vars:6,consts:[[3,"showModal"],[1,"flex","items-center","justify-between","bg-gray-800","rounded-t","p-2"],[1,"text-white","px-2","py-1","rounded-t","text-lg"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"cursor-pointer","feather","feather-x","text-white","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"px-4","pt-2","max-h-96","overflow-y-auto","text-sm"],[1,"font-semibold"],[1,"text-red-500"],["placeholder","Ej. Cobro de deuda","type","text",1,"input-generico","w-full","mt-2","mb-2",3,"ngModel","keyup.enter","ngModelChange"],["class","xl:flex items-center",4,"ngIf"],[1,"px-4","pb-2"],["class","boton-crear w-full mt-1",3,"click",4,"ngIf"],["class","boton-editar w-full mt-4",3,"click",4,"ngIf"],[1,"xl:flex","items-center"],[1,"xl:w-1/2"],[1,"font-semibold","text-sm"],[1,"border","text-sm","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"xl:ml-4","xl:w-1/2","xl:mt-0"],[1,"border","text-sm","capitalize","mt-2","border-gray-400","rounded","p-2","bg-gray-100"],[1,"boton-crear","w-full","mt-1",3,"click"],[1,"boton-editar","w-full","mt-4",3,"click"]],template:function(r,n){r&1&&(t(0,"app-modal",0)(1,"div")(2,"div",1)(3,"h1",2),p(4),i(),u(),t(5,"svg",3),m("click",function(){return n.tiposIngresosService.showModalAbm=!1}),g(6,"line",4)(7,"line",5),i()(),T(),t(8,"div",6)(9,"p",7)(10,"span",8),p(11," * "),i(),p(12," Descripci\xF3n "),i(),t(13,"input",9),m("keyup.enter",function(){return n.submit()})("ngModelChange",function(d){return n.tiposIngresosService.abmForm.descripcion=d}),i(),h(14,fe,12,5,"div",10),i(),t(15,"div",11),h(16,ve,2,0,"button",12)(17,_e,2,0,"button",13),i()()()),r&2&&(c("showModal",n.tiposIngresosService.showModalAbm),l(4),w(" ",n.tiposIngresosService.estadoAbm=="crear"?"Creando tipo":"Editando tipo"," "),l(9),c("ngModel",n.tiposIngresosService.abmForm.descripcion),l(),c("ngIf",n.tiposIngresosService.tipoSeleccionado&&n.tiposIngresosService.estadoAbm==="editar"),l(2),c("ngIf",n.tiposIngresosService.estadoAbm=="crear"),l(),c("ngIf",n.tiposIngresosService.estadoAbm=="editar"))},dependencies:[V,A,j,W,P,F,z,ie,M],encapsulation:2});let e=o;return e})();function he(e,o){if(e&1){let a=S();t(0,"button",46),m("click",function(){x(a);let r=f();return b(r.abrirAbm("crear"))}),u(),t(1,"svg",47),g(2,"path",48),i()()}}function xe(e,o){e&1&&(u(),t(0,"svg",49),g(1,"polyline",50),i())}function be(e,o){e&1&&(u(),t(0,"svg",51),g(1,"polyline",52),i())}function Se(e,o){e&1&&(u(),t(0,"svg",53),g(1,"line",54),i())}function Ie(e,o){e&1&&(u(),t(0,"svg",49),g(1,"polyline",50),i())}function we(e,o){e&1&&(u(),t(0,"svg",51),g(1,"polyline",52),i())}function ye(e,o){e&1&&(u(),t(0,"svg",53),g(1,"line",54),i())}function Te(e,o){e&1&&(u(),t(0,"svg",49),g(1,"polyline",50),i())}function Ce(e,o){e&1&&(u(),t(0,"svg",51),g(1,"polyline",52),i())}function Ee(e,o){e&1&&(u(),t(0,"svg",53),g(1,"line",54),i())}function ke(e,o){if(e&1){let a=S();t(0,"th",55)(1,"div",35),m("click",function(){x(a);let r=f();return b(r.ordenarPorColumna("activo"))}),t(2,"span"),p(3," Estado "),i(),t(4,"span",42),h(5,Te,2,0,"svg",37)(6,Ce,2,0,"svg",38)(7,Ee,2,0,"svg",39),i()()()}if(e&2){let a=f();l(5),c("ngIf",a.ordenar.columna=="activo"&&a.ordenar.direccion=="asc"),l(),c("ngIf",a.ordenar.columna=="activo"&&a.ordenar.direccion=="desc"),l(),c("ngIf",a.ordenar.columna!="activo")}}function Ae(e,o){e&1&&(t(0,"th",55),p(1," Acci\xF3n "),i())}var Ve=(e,o)=>o.id;function Me(e,o){if(e&1){let a=S();t(0,"td",57)(1,"app-pastilla-estado",62),m("click",function(){x(a);let r=f().$implicit,n=f(2);return b(n.actualizarEstado(r))}),i()()}if(e&2){let a=f().$implicit;l(),c("activo",a.activo)}}function Pe(e,o){if(e&1){let a=S();t(0,"td",63)(1,"span",64)(2,"button",65),m("click",function(){x(a);let r=f().$implicit,n=f(2);return b(n.abrirAbm("editar",r))}),u(),t(3,"svg",47),g(4,"path",66),i()()()()}}function Fe(e,o){if(e&1&&(t(0,"tr",56)(1,"td",57)(2,"p",58),p(3),i()(),t(4,"td",57)(5,"p",59),p(6),y(7,"fecha"),i()(),h(8,Me,2,1,"td",60)(9,Pe,5,0,"td",61),i()),e&2){let a=o.$implicit,s=f(2);l(3),w(" ",a.descripcion," "),l(3),w(" ",k(7,4,a.createdAt)," "),l(2),c("appPermisos",s.permiso_escritura),l(),c("appPermisos",s.permiso_escritura)}}function je(e,o){e&1&&(t(0,"tr",67),p(1," a "),i(),t(2,"tr",68)(3,"td",69),p(4," No se encontraron tipos "),i()())}var Le=(e,o)=>({itemsPerPage:e,currentPage:o});function ze(e,o){if(e&1&&(t(0,"tbody"),$(1,Fe,10,6,"tr",70,Ve,!1,je,5,0),y(4,"paginate"),y(5,"filtroTiposIngresos"),i()),e&2){let a=f();l(),H(Q(4,1,J(5,4,a.tiposIngresosService.tipos,a.filtro.parametro,a.filtro.activo),q(8,Le,a.cantidadItems,a.paginaActual)))}}function Be(e,o){if(e&1){let a=S();t(0,"div",71)(1,"pagination-controls",72),m("pageChange",function(r){x(a);let n=f();return b(n.paginaActual=r)}),i()()}}var ct=(()=>{let o=class o{constructor(s,r,n){this.tiposIngresosService=s,this.alertService=r,this.dataService=n,this.permiso_escritura=["TIPOS_INGRESOS_ALL"],this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:"desc",columna:"descripcion"}}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Tipos de ingresos",this.alertService.loading(),this.listarTipos()}abrirAbm(s,r=null){this.tiposIngresosService.abrirAbm(s,r)}listarTipos(){let s={direccion:this.ordenar.direccion,columna:this.ordenar.columna};this.tiposIngresosService.listarTipos(s).subscribe({next:({tipos:r})=>{this.tiposIngresosService.tipos=r,this.alertService.close()},error:({error:r})=>this.alertService.errorApi(r.message)})}nuevoTipo(s){this.tiposIngresosService.tipos=[s,...this.tiposIngresosService.tipos],this.alertService.close()}actualizarTipo(s){let r=this.tiposIngresosService.tipos.findIndex(n=>n.id===s.id);this.tiposIngresosService.tipos[r]=s,this.tiposIngresosService.tipos=[...this.tiposIngresosService.tipos],this.alertService.close()}actualizarEstado(s){let{id:r,activo:n}=s;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:v})=>{v&&(this.alertService.loading(),this.tiposIngresosService.actualizarTipo(r,{activo:!n}).subscribe({next:()=>{this.listarTipos()},error:({error:d})=>this.alertService.errorApi(d.message)}))})}filtrarActivos(s){this.paginaActual=1,this.filtro.activo=s}filtrarParametro(s){this.paginaActual=1,this.filtro.parametro=s}ordenarPorColumna(s){this.ordenar.columna=s,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarTipos()}};o.\u0275fac=function(r){return new(r||o)(I(B),I(L),I(ee))},o.\u0275cmp=C({type:o,selectors:[["app-tipos-ingresos"]],standalone:!0,features:[E],decls:68,vars:13,consts:[[3,"insertEvent","updateEvent"],[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nuevo tipo","class","boton-nuevo-header",3,"click",4,"appPermisos"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative","w-full","md:w-auto"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"bg-white","text-sm","focus:outline-none","w-full","md:w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],["class","px-5 border-b-2 border-gray-200 bg-gray-100 text-center text-sm font-semibold text-gray-900 tracking-wider",4,"appPermisos"],[4,"ngIf"],["class","px-5 text-sm py-5 mt-4 bg-white border-t flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],["title","Nuevo tipo",1,"boton-nuevo-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"animate__animated","animate__fadeIn"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","w-max","whitespace-no-wrap","p-2"],[1,"text-gray-900","whitespace-no-wrap"],["class","px-5 py-2 border-b border-gray-200 text-xs",4,"appPermisos"],["class","px-5 py-2 border-b border-gray-200 text-xs text-center",4,"appPermisos"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar tipo",1,"boton-editar","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],[1,"p-4","text-white"],[1,"w-full"],["colspan","4",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated animate__fadeIn"],[1,"px-5","text-sm","py-5","mt-4","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"]],template:function(r,n){if(r&1){let v=S();t(0,"app-abm-tipo-ingreso",0),m("insertEvent",function(_){return n.nuevoTipo(_)})("updateEvent",function(_){return n.actualizarTipo(_)}),i(),t(1,"div",1)(2,"app-tarjeta-lista")(3,"div",2)(4,"div")(5,"div",3)(6,"div",4)(7,"h2",5),p(8," Tipos de ingresos "),i(),t(9,"p"),p(10),i()(),t(11,"div"),h(12,he,3,0,"button",6),i()(),t(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"select",11,12),m("change",function(){x(v);let _=O(18);return b(n.filtrarActivos(_.value))}),t(19,"option",13),p(20," Activos "),i(),t(21,"option",14),p(22," Inactivos "),i(),t(23,"option",15),p(24," Todos "),i()(),t(25,"div",16),u(),t(26,"svg",17),g(27,"path",18),i()()()(),T(),t(28,"div",19)(29,"span",20),u(),t(30,"svg",21),g(31,"path",22),i()(),T(),t(32,"input",23,24),m("keyup",function(){x(v);let _=O(33);return b(n.filtrarParametro(_.value))}),i()(),t(34,"select",25),m("change",function(){return n.paginaActual=1})("ngModelChange",function(_){return n.cantidadItems=_}),t(35,"option",26),p(36," 10 elementos "),i(),t(37,"option",27),p(38," 20 elementos "),i(),t(39,"option",28),p(40," 50 elementos "),i(),t(41,"option",29),p(42," 100 elementos "),i()()()(),t(43,"div",30)(44,"div",31)(45,"table",32)(46,"thead")(47,"tr",33)(48,"th",34)(49,"div",35),m("click",function(){return n.ordenarPorColumna("descripcion")}),t(50,"span"),p(51," Descripci\xF3n "),i(),t(52,"span",36),h(53,xe,2,0,"svg",37)(54,be,2,0,"svg",38)(55,Se,2,0,"svg",39),i()()(),t(56,"th",40)(57,"div",41),m("click",function(){return n.ordenarPorColumna("createdAt")}),t(58,"span"),p(59," Fecha de creaci\xF3n "),i(),t(60,"span",42),h(61,Ie,2,0,"svg",37)(62,we,2,0,"svg",38)(63,ye,2,0,"svg",39),i()()(),h(64,ke,8,3,"th",43)(65,Ae,2,0,"th",43),i()(),h(66,ze,6,11,"tbody",44),i()()()(),h(67,Be,2,0,"div",45),i()()()}r&2&&(l(10),w(" Total de tipos: ",n.tiposIngresosService.tipos.length," "),l(2),c("appPermisos",n.permiso_escritura),l(22),c("ngModel",n.cantidadItems),l(19),c("ngIf",n.ordenar.columna=="descripcion"&&n.ordenar.direccion=="asc"),l(),c("ngIf",n.ordenar.columna=="descripcion"&&n.ordenar.direccion=="desc"),l(),c("ngIf",n.ordenar.columna!="descripcion"),l(6),c("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="asc"),l(),c("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="desc"),l(),c("ngIf",n.ordenar.columna!="createdAt"),l(),c("appPermisos",n.permiso_escritura),l(),c("appPermisos",n.permiso_escritura),l(),c("ngIf",n.tiposIngresosService.tipos),l(),c("ngIf",n.tiposIngresosService.tipos.length>n.cantidadItems))},dependencies:[V,A,j,Y,Z,X,P,F,z,oe,ne,re,M,se,ae,pe,ce,te],encapsulation:2});let e=o;return e})();export{ct as default};
