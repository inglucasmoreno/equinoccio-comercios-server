import{a as k}from"./chunk-SN5MITE4.js";import{a as L}from"./chunk-22XSY4EJ.js";import{d as O}from"./chunk-6M6LJACB.js";import{a as P,b as p,c as A,d as N,f as D,h as T,i as j,n as q,p as R}from"./chunk-B2HCO65P.js";import{a as z}from"./chunk-BPTFILPP.js";import{b as M}from"./chunk-5N72VQB2.js";import"./chunk-VSPTT5AX.js";import{c as y,e as C,g as F,v as U}from"./chunk-BJBUZF5B.js";import{$a as s,Bb as b,Db as S,Gb as E,Hb as I,Ra as a,Sa as c,ba as h,cb as f,gb as i,hb as t,ib as v,pb as w,qb as _,ub as o,wb as d,xb as x}from"./chunk-GQGQXF3A.js";function V(r,l){r&1&&(i(0,"div",26)(1,"p",27),o(2," A "),t()())}function B(r,l){r&1&&(i(0,"div",28)(1,"p",29),o(2," E "),t()())}var H=r=>({"text-orange-700":r});function J(r,l){if(r&1&&(i(0,"div",15)(1,"div",16),f(2,V,3,0,"div",17)(3,B,3,0,"div",18),i(4,"p",19),o(5),t()(),i(6,"div",20)(7,"div",21)(8,"p",22),o(9," Apellido y Nombre "),t(),i(10,"p",23),o(11),t()(),i(12,"div",24)(13,"p",22),o(14," DNI "),t(),i(15,"p",25),o(16),t()(),i(17,"div",24)(18,"p",22),o(19," Correo electr\xF3nico "),t(),i(20,"p",25),o(21),t()(),i(22,"div",24)(23,"p",22),o(24," Fecha de ingreso "),t(),i(25,"p",25),o(26),E(27,"fecha"),t()()()()),r&2){let n=_();a(2),s("ngIf",n.usuarioLogin.role==="ADMIN_ROLE"),a(),s("ngIf",n.usuarioLogin.role==="USER_ROLE"),a(),s("ngClass",S(11,H,n.usuarioLogin.role==="USER_ROLE")),a(),d(" ",n.usuarioLogin.role==="ADMIN_ROLE"?"Usuario administrador":"Usuario estandar"," "),a(6),x(" ",n.usuarioLogin.apellido.toLowerCase()," ",n.usuarioLogin.nombre.toLowerCase()," "),a(5),d(" ",n.usuarioLogin.dni," "),a(5),d(" ",n.usuarioLogin.email," "),a(5),d(" ",I(27,9,n.usuarioLogin.createdAt)," ")}}function K(r,l){r&1&&(i(0,"p",30),o(1," La contrase\xF1a es obligatoria "),t())}function Q(r,l){if(r&1&&(i(0,"p",30),o(1),t()),r&2){let n=_();a(),d(" Debe tener como minimo ",n.password_actual==null||n.password_actual.errors==null?null:n.password_actual.errors.minlength.requiredLength," caracteres ")}}function W(r,l){r&1&&(i(0,"p",30),o(1," La contrase\xF1a es obligatoria "),t())}function X(r,l){if(r&1&&(i(0,"p",30),o(1),t()),r&2){let n=_();a(),d(" Debe tener como minimo ",n.password_nuevo==null||n.password_nuevo.errors==null?null:n.password_nuevo.errors.minlength.requiredLength," caracteres ")}}function Y(r,l){r&1&&(i(0,"p",30),o(1," La contrase\xF1a es obligatoria "),t())}function Z(r,l){if(r&1&&(i(0,"p",30),o(1),t()),r&2){let n=_();a(),d(" Debe tener como minimo ",n.password_nuevo_repetir==null||n.password_nuevo_repetir.errors==null?null:n.password_nuevo_repetir.errors.minlength.requiredLength," caracteres ")}}var de=(()=>{let l=class l{get password_actual(){return this.passwordForm.get("password_actual")}get password_nuevo(){return this.passwordForm.get("password_nuevo")}get password_nuevo_repetir(){return this.passwordForm.get("password_nuevo_repetir")}constructor(u,m,e,g,G){this.authService=u,this.dataService=m,this.fb=e,this.usuariosService=g,this.alertService=G}ngOnInit(){z.from(".gsap-contenido",{y:100,opacity:0,duration:.2}),this.dataService.ubicacionActual="Dashboard - Perfil",this.getUsuario(),this.passwordForm=this.fb.group({password_actual:["",[p.required,p.minLength(4)]],password_nuevo:["",[p.required,p.minLength(4)]],password_nuevo_repetir:["",[p.required,p.minLength(4)]]})}getUsuario(){this.alertService.loading(),this.usuariosService.getUsuario(this.authService.usuario.userId).subscribe({next:u=>{this.alertService.close(),this.usuarioLogin=u},error:({error:u})=>{this.alertService.errorApi(u.msg)}})}actualizarPassword(){this.passwordForm.valid?(this.alertService.loading(),this.usuariosService.actualizarPasswordPefil(this.authService.usuario.userId,this.passwordForm.value).subscribe({next:()=>{this.passwordForm.reset(),this.alertService.success("Contrase\xF1a actualizada")},error:({error:u})=>{this.passwordForm.reset(),this.alertService.errorApi(u.message)}})):this.passwordForm.markAllAsTouched()}};l.\u0275fac=function(m){return new(m||l)(c(L),c(M),c(q),c(k),c(U))},l.\u0275cmp=h({type:l,selectors:[["app-perfil"]],standalone:!0,features:[b],decls:29,vars:8,consts:[[1,"p-4","gsap-contenido","w-full","max-w-5xl","mx-auto","md:flex"],[1,"border","border-gray-400","w-full","md:w-1/2","shadow","rounded"],[1,"text-xl","p-2","bg-gray-800","border","border-gray-800","text-white","text-center","rounded-t"],["class","p-4",4,"ngIf"],[1,"w-full","text-sm","mt-2","md:mt-0","md:w-1/2","md:ml-2","border","border-gray-400","shadow","rounded","h-full"],[1,"bg-gray-800","border","border-gray-800","text-white","text-center","text-xl","rounded-t","p-2"],[1,"p-2",3,"formGroup","submit"],[1,"font-semibold","ml-1"],["formControlName","password_actual","autocomplete","false","type","password","placeholder","Mi contrase\xF1a actual",1,"input-generico","w-full","mt-1"],["class","text-error mt-1",4,"ngIf"],[1,"mt-2"],["formControlName","password_nuevo","autocomplete","false","type","password","placeholder","Ingresar nueva contrase\xF1a",1,"input-generico","w-full","mt-1"],[1,"mt-2","mb-2"],["formControlName","password_nuevo_repetir","autocomplete","false","type","password","placeholder","Repite la nueva contrase\xF1a",1,"input-generico","w-full","mt-1"],[1,"boton-editar","my-2","w-full",3,"click"],[1,"p-4"],[1,"mt-3","text-center"],["class","bg-blue-100 mr-auto ml-auto rounded-full flex items-center justify-center w-24 h-24 shadow border border-blue-300",4,"ngIf"],["class","bg-orange-100 mr-auto ml-auto flex items-center justify-center w-24 h-24 rounded-full shadow border border-orange-300",4,"ngIf"],[1,"mt-1","text-sm","text-blue-800",3,"ngClass"],[1,"w-full","mt-2"],[1,"p-2","text-center"],[1,"font-semibold","text-xl"],[1,"capitalize","text-gray-500"],[1,"p-2","text-center","mt-1"],[1,"text-gray-500"],[1,"bg-blue-100","mr-auto","ml-auto","rounded-full","flex","items-center","justify-center","w-24","h-24","shadow","border","border-blue-300"],[1,"text-4xl","font-semibold","text-blue-900"],[1,"bg-orange-100","mr-auto","ml-auto","flex","items-center","justify-center","w-24","h-24","rounded-full","shadow","border","border-orange-300"],[1,"text-4xl","font-semibold","text-orange-500"],[1,"text-error","mt-1"]],template:function(m,e){m&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3," Datos de usuario "),t(),f(4,J,28,13,"div",3),t(),i(5,"div",4)(6,"h1",5),o(7," Actualizar contrase\xF1a "),t(),i(8,"form",6),w("submit",function(){return e.actualizarPassword()}),i(9,"div")(10,"p",7),o(11," Contrase\xF1a actual "),t(),v(12,"input",8),f(13,K,2,0,"p",9)(14,Q,2,1,"p",9),t(),i(15,"div",10)(16,"p",7),o(17," Nueva contrase\xF1a "),t(),v(18,"input",11),f(19,W,2,0,"p",9)(20,X,2,1,"p",9),t(),i(21,"div",12)(22,"p",7),o(23," Repetir contrase\xF1a "),t(),v(24,"input",13),f(25,Y,2,0,"p",9)(26,Z,2,1,"p",9),t(),i(27,"button",14),w("click",function(){return e.actualizarPassword()}),o(28," Actualizar contrase\xF1a "),t()()()()),m&2&&(a(4),s("ngIf",e.usuarioLogin),a(4),s("formGroup",e.passwordForm),a(5),s("ngIf",e.password_actual.touched&&(e.password_actual==null||e.password_actual.errors==null?null:e.password_actual.errors.required)),a(),s("ngIf",e.password_actual.touched&&(e.password_actual==null||e.password_actual.errors==null?null:e.password_actual.errors.minlength)),a(5),s("ngIf",e.password_nuevo.touched&&(e.password_nuevo==null||e.password_nuevo.errors==null?null:e.password_nuevo.errors.required)),a(),s("ngIf",e.password_nuevo.touched&&(e.password_nuevo==null||e.password_nuevo.errors==null?null:e.password_nuevo.errors.minlength)),a(5),s("ngIf",e.password_nuevo_repetir.touched&&(e.password_nuevo_repetir==null||e.password_nuevo_repetir.errors==null?null:e.password_nuevo_repetir.errors.required)),a(),s("ngIf",e.password_nuevo_repetir.touched&&(e.password_nuevo_repetir==null||e.password_nuevo_repetir.errors==null?null:e.password_nuevo_repetir.errors.minlength)))},dependencies:[R,D,P,A,N,T,j,F,y,C,O],encapsulation:2});let r=l;return r})();export{de as default};
